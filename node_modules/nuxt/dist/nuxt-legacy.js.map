{"version":3,"file":"nuxt-legacy.js","sources":["../../../lib/common/utils.js","../../../lib/core/module.js","../../../lib/common/modes.js","../../../lib/common/nuxt.config.js","../../../lib/common/options.js","../../../lib/core/meta.js","../../../lib/core/middleware/error.js","../../../lib/core/middleware/nuxt.js","../../../lib/core/renderer.js","../../../lib/core/nuxt.js","../../../lib/core/index.js","../../../lib/builder/webpack/utils/perf-loader.js","../../../lib/builder/webpack/plugins/vue/util.js","../../../lib/builder/webpack/plugins/vue/client.js","../../../lib/builder/webpack/utils/postcss.js","../../../lib/builder/webpack/utils/style-loader.js","../../../lib/builder/webpack/plugins/warnfix.js","../../../lib/builder/webpack/plugins/stats.js","../../../lib/builder/webpack/base.js","../../../lib/builder/webpack/client.js","../../../lib/builder/webpack/plugins/vue/server.js","../../../lib/builder/webpack/server.js","../../../lib/builder/builder.js","../../../lib/builder/generator.js","../../../lib/builder/index.js","../src/index.js"],"sourcesContent":["import path from 'path'\nimport _ from 'lodash'\nimport consola from 'consola'\n\nexport const encodeHtml = function encodeHtml(str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nexport const getContext = function getContext(req, res) {\n  return { req, res }\n}\n\nexport const waitFor = function waitFor(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms || 0))\n}\n\nexport const isString = function isString(obj) {\n  return typeof obj === 'string' || obj instanceof String\n}\nexport const startsWithAlias = aliasArray => str => aliasArray.some(c => str.startsWith(c))\n\nexport const startsWithSrcAlias = startsWithAlias(['@', '~'])\n\nexport const startsWithRootAlias = startsWithAlias(['@@', '~~'])\n\nasync function promiseFinally(fn, finalFn) {\n  let result\n  try {\n    if (typeof fn === 'function') {\n      result = await fn()\n    } else {\n      result = await fn\n    }\n  } finally {\n    finalFn()\n  }\n  return result\n}\n\nexport const timeout = function timeout(fn, ms, msg) {\n  let timerId\n  const warpPromise = promiseFinally(fn, () => clearTimeout(timerId))\n  const timerPromise = new Promise((resolve, reject) => {\n    timerId = setTimeout(() => reject(new Error(msg)), ms)\n  })\n  return Promise.race([warpPromise, timerPromise])\n}\n\nexport const urlJoin = function urlJoin() {\n  return [].slice\n    .call(arguments)\n    .join('/')\n    .replace(/\\/+/g, '/')\n    .replace(':/', '://')\n}\n\nexport const isUrl = function isUrl(url) {\n  return ['http', '//'].some(str => url.startsWith(str))\n}\n\nexport const promisifyRoute = function promisifyRoute(fn, ...args) {\n  // If routes is an array\n  if (Array.isArray(fn)) {\n    return Promise.resolve(fn)\n  }\n  // If routes is a function expecting a callback\n  if (fn.length === arguments.length) {\n    return new Promise((resolve, reject) => {\n      fn((err, routeParams) => {\n        if (err) {\n          reject(err)\n        }\n        resolve(routeParams)\n      }, ...args)\n    })\n  }\n  let promise = fn(...args)\n  if (\n    !promise ||\n    (!(promise instanceof Promise) && typeof promise.then !== 'function')\n  ) {\n    promise = Promise.resolve(promise)\n  }\n  return promise\n}\n\nexport const sequence = function sequence(tasks, fn) {\n  return tasks.reduce(\n    (promise, task) => promise.then(() => fn(task)),\n    Promise.resolve()\n  )\n}\n\nexport const parallel = function parallel(tasks, fn) {\n  return Promise.all(tasks.map(fn))\n}\n\nexport const chainFn = function chainFn(base, fn) {\n  /* istanbul ignore if */\n  if (typeof fn !== 'function') {\n    return base\n  }\n  return function () {\n    if (typeof base !== 'function') {\n      return fn.apply(this, arguments)\n    }\n    let baseResult = base.apply(this, arguments)\n    // Allow function to mutate the first argument instead of returning the result\n    if (baseResult === undefined) {\n      baseResult = arguments[0]\n    }\n    const fnResult = fn.call(\n      this,\n      baseResult,\n      ...Array.prototype.slice.call(arguments, 1)\n    )\n    // Return mutated argument if no result was returned\n    if (fnResult === undefined) {\n      return baseResult\n    }\n    return fnResult\n  }\n}\n\nexport const isPureObject = function isPureObject(o) {\n  return !Array.isArray(o) && typeof o === 'object'\n}\n\nexport const isWindows = /^win/.test(process.platform)\n\nexport const wp = function wp(p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\\\/g, '\\\\\\\\')\n  }\n  return p\n}\n\nexport const wChunk = function wChunk(p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\//g, '_')\n  }\n  return p\n}\n\nconst reqSep = /\\//g\nconst sysSep = _.escapeRegExp(path.sep)\nconst normalize = string => string.replace(reqSep, sysSep)\n\nexport const r = function r(...args) {\n  const lastArg = args[args.length - 1]\n\n  if (startsWithSrcAlias(lastArg)) {\n    return wp(lastArg)\n  }\n\n  return wp(path.resolve(...args.map(normalize)))\n}\n\nexport const relativeTo = function relativeTo() {\n  const args = Array.prototype.slice.apply(arguments)\n  const dir = args.shift()\n\n  // Keep webpack inline loader intact\n  if (args[0].includes('!')) {\n    const loaders = args.shift().split('!')\n\n    return loaders.concat(relativeTo(dir, loaders.pop(), ...args)).join('!')\n  }\n\n  // Resolve path\n  const _path = r(...args)\n\n  // Check if path is an alias\n  if (startsWithSrcAlias(_path)) {\n    return _path\n  }\n\n  // Make correct relative path\n  let rp = path.relative(dir, _path)\n  if (rp[0] !== '.') {\n    rp = './' + rp\n  }\n\n  return wp(rp)\n}\n\nexport const flatRoutes = function flatRoutes(router, _path = '', routes = []) {\n  router.forEach((r) => {\n    if ([':', '*'].some(c => r.path.includes(c))) {\n      return\n    }\n    /* istanbul ignore if */\n    if (r.children) {\n      if (_path === '' && r.path === '/') {\n        routes.push('/')\n      }\n      return flatRoutes(r.children, _path + r.path + '/', routes)\n    }\n    _path = _path.replace(/^\\/+$/, '/')\n    routes.push(\n      (r.path === '' && _path[_path.length - 1] === '/'\n        ? _path.slice(0, -1)\n        : _path) + r.path\n    )\n  })\n  return routes\n}\n\nfunction cleanChildrenRoutes(routes, isChild = false) {\n  let start = -1\n  const routesIndex = []\n  routes.forEach((route) => {\n    if (/-index$/.test(route.name) || route.name === 'index') {\n      // Save indexOf 'index' key in name\n      const res = route.name.split('-')\n      const s = res.indexOf('index')\n      start = start === -1 || s < start ? s : start\n      routesIndex.push(res)\n    }\n  })\n  routes.forEach((route) => {\n    route.path = isChild ? route.path.replace('/', '') : route.path\n    if (route.path.includes('?')) {\n      const names = route.name.split('-')\n      const paths = route.path.split('/')\n      if (!isChild) {\n        paths.shift()\n      } // clean first / for parents\n      routesIndex.forEach((r) => {\n        const i = r.indexOf('index') - start //  children names\n        if (i < paths.length) {\n          for (let a = 0; a <= i; a++) {\n            if (a === i) {\n              paths[a] = paths[a].replace('?', '')\n            }\n            if (a < i && names[a] !== r[a]) {\n              break\n            }\n          }\n        }\n      })\n      route.path = (isChild ? '' : '/') + paths.join('/')\n    }\n    route.name = route.name.replace(/-index$/, '')\n    if (route.children) {\n      if (route.children.find(child => child.path === '')) {\n        delete route.name\n      }\n      route.children = cleanChildrenRoutes(route.children, true)\n    }\n  })\n  return routes\n}\n\nexport const createRoutes = function createRoutes(files, srcDir, pagesDir) {\n  const routes = []\n  files.forEach((file) => {\n    const keys = file\n      .replace(RegExp(`^${pagesDir}`), '')\n      .replace(/\\.(vue|js)$/, '')\n      .replace(/\\/{2,}/g, '/')\n      .split('/')\n      .slice(1)\n    const route = { name: '', path: '', component: r(srcDir, file) }\n    let parent = routes\n    keys.forEach((key, i) => {\n      // remove underscore only, if its the prefix\n      const sanitizedKey = key.startsWith('_') ? key.substr(1) : key\n\n      route.name = route.name\n        ? route.name + '-' + sanitizedKey\n        : sanitizedKey\n      route.name += key === '_' ? 'all' : ''\n      route.chunkName = file.replace(/\\.(vue|js)$/, '')\n      const child = parent.find(parentRoute => parentRoute.name === route.name)\n\n      if (child) {\n        child.children = child.children || []\n        parent = child.children\n        route.path = ''\n      } else if (key === 'index' && i + 1 === keys.length) {\n        route.path += i > 0 ? '' : '/'\n      } else {\n        route.path += '/' + getRoutePathExtension(key)\n\n        if (key.startsWith('_') && key.length > 1) {\n          route.path += '?'\n        }\n      }\n    })\n    // Order Routes path\n    parent.push(route)\n    parent.sort((a, b) => {\n      if (!a.path.length) {\n        return -1\n      }\n      if (!b.path.length) {\n        return 1\n      }\n      // Order: /static, /index, /:dynamic\n      // Match exact route before index: /login before /index/_slug\n      if (a.path === '/') {\n        return DYNAMIC_ROUTE_REGEX.test(b.path) ? -1 : 1\n      }\n      if (b.path === '/') {\n        return DYNAMIC_ROUTE_REGEX.test(a.path) ? 1 : -1\n      }\n\n      let i\n      let res = 0\n      let y = 0\n      let z = 0\n      const _a = a.path.split('/')\n      const _b = b.path.split('/')\n      for (i = 0; i < _a.length; i++) {\n        if (res !== 0) {\n          break\n        }\n        y = _a[i] === '*' ? 2 : _a[i].includes(':') ? 1 : 0\n        z = _b[i] === '*' ? 2 : _b[i].includes(':') ? 1 : 0\n        res = y - z\n        // If a.length >= b.length\n        if (i === _b.length - 1 && res === 0) {\n          // change order if * found\n          res = _a[i] === '*' ? -1 : 1\n        }\n      }\n      return res === 0 ? (_a[i - 1] === '*' && _b[i] ? 1 : -1) : res\n    })\n  })\n  return cleanChildrenRoutes(routes)\n}\n\n// Guard dir1 from dir2 which can be indiscriminately removed\nexport const guardDir = function guardDir(options, key1, key2) {\n  const dir1 = _.get(options, key1, false)\n  const dir2 = _.get(options, key2, false)\n\n  if (\n    dir1 &&\n    dir2 &&\n    (\n      dir1 === dir2 ||\n      (\n        dir1.startsWith(dir2) &&\n        !path.basename(dir1).startsWith(path.basename(dir2))\n      )\n    )\n  ) {\n    const errorMessage = `options.${key2} cannot be a parent of or same as ${key1}`\n    consola.fatal(errorMessage)\n    throw new Error(errorMessage)\n  }\n}\n\nexport const determineGlobals = function determineGlobals(globalName, globals) {\n  const _globals = {}\n  for (const global in globals) {\n    if (typeof globals[global] === 'function') {\n      _globals[global] = globals[global](globalName)\n    } else {\n      _globals[global] = globals[global]\n    }\n  }\n  return _globals\n}\n\nconst getRoutePathExtension = (key) => {\n  if (key === '_') {\n    return '*'\n  }\n\n  if (key.startsWith('_')) {\n    return `:${key.substr(1)}`\n  }\n\n  return key\n}\n\nconst DYNAMIC_ROUTE_REGEX = /^\\/(:|\\*)/\n\n/**\n * Wraps value in array if it is not already an array\n *\n * @param  {any} value\n * @return {array}\n */\nexport const wrapArray = value => Array.isArray(value) ? value : [value]\n","import path from 'path'\nimport fs from 'fs'\nimport hash from 'hash-sum'\nimport consola from 'consola'\nimport { chainFn, sequence } from '../common/utils'\n\nexport default class ModuleContainer {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.requiredModules = {}\n  }\n\n  async ready() {\n    // Call before hook\n    await this.nuxt.callHook('modules:before', this, this.options.modules)\n\n    // Load every module in sequence\n    await sequence(this.options.modules, this.addModule.bind(this))\n\n    // Call done hook\n    await this.nuxt.callHook('modules:done', this)\n  }\n\n  addVendor() {\n    consola.warn('addVendor has been deprecated due to webpack4 optimization')\n  }\n\n  addTemplate(template) {\n    /* istanbul ignore if */\n    if (!template) {\n      throw new Error('Invalid template:' + JSON.stringify(template))\n    }\n\n    // Validate & parse source\n    const src = template.src || template\n    const srcPath = path.parse(src)\n    /* istanbul ignore if */\n    if (typeof src !== 'string' || !fs.existsSync(src)) {\n      throw new Error('Template src not found:' + src)\n    }\n\n    // Generate unique and human readable dst filename\n    const dst =\n      template.fileName ||\n      path.basename(srcPath.dir) + `.${srcPath.name}.${hash(src)}` + srcPath.ext\n\n    // Add to templates list\n    const templateObj = {\n      src,\n      dst,\n      options: template.options\n    }\n\n    this.options.build.templates.push(templateObj)\n    return templateObj\n  }\n\n  addPlugin(template) {\n    const { dst } = this.addTemplate(template)\n\n    // Add to nuxt plugins\n    this.options.plugins.unshift({\n      src: path.join(this.options.buildDir, dst),\n      ssr: template.ssr\n    })\n  }\n\n  addLayout(template, name) {\n    const { dst, src } = this.addTemplate(template)\n\n    // Add to nuxt layouts\n    this.options.layouts[name || path.parse(src).name] = `./${dst}`\n\n    // If error layout, set ErrorPage\n    if (name === 'error') {\n      this.addErrorLayout(dst)\n    }\n  }\n\n  addErrorLayout(dst) {\n    const relativeBuildDir = path.relative(this.options.rootDir, this.options.buildDir)\n    this.options.ErrorPage = `~/${relativeBuildDir}/${dst}`\n  }\n\n  addServerMiddleware(middleware) {\n    this.options.serverMiddleware.push(middleware)\n  }\n\n  extendBuild(fn) {\n    this.options.build.extend = chainFn(this.options.build.extend, fn)\n  }\n\n  extendRoutes(fn) {\n    this.options.router.extendRoutes = chainFn(\n      this.options.router.extendRoutes,\n      fn\n    )\n  }\n\n  requireModule(moduleOpts) {\n    return this.addModule(moduleOpts, true /* require once */)\n  }\n\n  addModule(moduleOpts, requireOnce) {\n    let src\n    let options\n    let handler\n\n    // Type 1: String\n    if (typeof moduleOpts === 'string') {\n      src = moduleOpts\n    } else if (Array.isArray(moduleOpts)) {\n      // Type 2: Babel style array\n      src = moduleOpts[0]\n      options = moduleOpts[1]\n    } else if (typeof moduleOpts === 'object') {\n      // Type 3: Pure object\n      src = moduleOpts.src\n      options = moduleOpts.options\n      handler = moduleOpts.handler\n    }\n\n    // Resolve handler\n    if (!handler) {\n      handler = this.nuxt.requireModule(src)\n    }\n\n    // Validate handler\n    /* istanbul ignore if */\n    if (typeof handler !== 'function') {\n      throw new Error('Module should export a function: ' + src)\n    }\n\n    // Resolve module meta\n    const key = (handler.meta && handler.meta.name) || handler.name || src\n\n    // Update requiredModules\n    if (typeof key === 'string') {\n      if (requireOnce && this.requiredModules[key]) {\n        return\n      }\n      this.requiredModules[key] = { src, options, handler }\n    }\n\n    // Default module options to empty object\n    if (options === undefined) {\n      options = {}\n    }\n\n    return new Promise((resolve) => {\n      // Call module with `this` context and pass options\n      const result = handler.call(this, options)\n\n      // If module send back a promise\n      if (result && result.then) {\n        return resolve(result)\n      }\n\n      // synchronous\n      return resolve()\n    })\n  }\n}\n","export default {\n  universal: {\n    build: {\n      ssr: true\n    },\n    render: {\n      ssr: true\n    }\n  },\n  spa: {\n    build: {\n      ssr: false\n    },\n    render: {\n      ssr: false\n    }\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\nimport _ from 'lodash'\nimport env from 'std-env'\n\nconst nuxtDir = fs.existsSync(path.resolve(__dirname, '..', 'package.json'))\n  ? path.resolve(__dirname, '..') // dist\n  : path.resolve(__dirname, '..', '..') // src\n\nexport default {\n  // Information about running environment\n  dev: Boolean(env.dev),\n  debug: undefined, // = dev\n\n  // Mode\n  mode: 'universal',\n\n  // Global name\n  globalName: `nuxt`,\n  globals: {\n    id: globalName => `__${globalName}`,\n    nuxt: globalName => `$${globalName}`,\n    context: globalName => `__${globalName.toUpperCase()}__`,\n    pluginPrefix: globalName => globalName,\n    readyCallback: globalName => `on${_.capitalize(globalName)}Ready`,\n    loadedCallback: globalName => `_on${_.capitalize(globalName)}Loaded`\n  },\n\n  // Server options\n  server: {\n    https: false,\n    port: process.env.NUXT_PORT ||\n      process.env.PORT ||\n      process.env.npm_package_config_nuxt_port,\n    host: process.env.NUXT_HOST ||\n      process.env.HOST ||\n      process.env.npm_package_config_nuxt_host\n  },\n\n  // Dirs\n  srcDir: undefined,\n  buildDir: '.nuxt',\n  nuxtDir,\n  nuxtAppDir: path.resolve(nuxtDir, 'lib', 'app'),\n  modulesDir: ['node_modules'], // ~> relative to options.rootDir\n\n  // Ignore\n  ignorePrefix: '-',\n  ignore: [\n    '**/*.test.*',\n    '**/*.spec.*'\n  ],\n\n  extensions: [],\n\n  build: {\n    quiet: Boolean(env.ci || env.test),\n    analyze: false,\n    profile: process.argv.includes('--profile'),\n    extractCSS: false,\n    cssSourceMap: undefined,\n    ssr: undefined,\n    parallel: false,\n    cache: false,\n    publicPath: '/_nuxt/',\n    filenames: {\n      // { isDev, isClient, isServer }\n      app: ({ isDev }) => isDev ? '[name].js' : '[chunkhash].js',\n      chunk: ({ isDev }) => isDev ? '[name].js' : '[chunkhash].js',\n      css: ({ isDev }) => isDev ? '[name].css' : '[contenthash].css',\n      img: ({ isDev }) => isDev ? '[path][name].[ext]' : 'img/[hash:7].[ext]',\n      font: ({ isDev }) => isDev ? '[path][name].[ext]' : 'fonts/[hash:7].[ext]',\n      video: ({ isDev }) => isDev ? '[path][name].[ext]' : 'videos/[hash:7].[ext]'\n    },\n    loaders: {\n      file: {},\n      fontUrl: { limit: 1000 },\n      imgUrl: { limit: 1000 },\n      pugPlain: {},\n      vue: {\n        transformAssetUrls: {\n          video: 'src',\n          source: 'src',\n          object: 'src',\n          embed: 'src'\n        }\n      },\n      css: {},\n      cssModules: {\n        localIdentName: '[local]_[hash:base64:5]'\n      },\n      less: {},\n      sass: {\n        indentedSyntax: true\n      },\n      scss: {},\n      stylus: {},\n      vueStyle: {}\n    },\n    styleResources: {},\n    plugins: [],\n    terser: {},\n    optimizeCSS: undefined,\n    optimization: {\n      runtimeChunk: 'single',\n      minimize: undefined,\n      minimizer: undefined,\n      splitChunks: {\n        chunks: 'all',\n        automaticNameDelimiter: '.',\n        name: undefined,\n        cacheGroups: {}\n      }\n    },\n    splitChunks: {\n      layouts: false,\n      pages: true,\n      commons: true\n    },\n    babel: {\n      babelrc: false,\n      cacheDirectory: undefined\n    },\n    transpile: [], // Name of NPM packages to be transpiled\n    postcss: {\n      preset: {\n        // https://cssdb.org/#staging-process\n        stage: 2\n      }\n    },\n    html: {\n      minify: {\n        collapseBooleanAttributes: true,\n        decodeEntities: true,\n        minifyCSS: true,\n        minifyJS: true,\n        processConditionalComments: true,\n        removeEmptyAttributes: true,\n        removeRedundantAttributes: true,\n        trimCustomFragments: true,\n        useShortDoctype: true\n      }\n    },\n\n    templates: [],\n    watch: [],\n    devMiddleware: {},\n    hotMiddleware: {},\n    stats: {\n      chunks: false,\n      children: false,\n      modules: false,\n      colors: true,\n      warnings: true,\n      errors: true,\n      excludeAssets: [\n        /.map$/,\n        /index\\..+\\.html$/,\n        /vue-ssr-client-manifest.json/\n      ]\n    }\n  },\n  generate: {\n    dir: 'dist',\n    routes: [],\n    concurrency: 500,\n    interval: 0,\n    subFolders: true,\n    fallback: '200.html'\n  },\n  env: {},\n  head: {\n    meta: [],\n    link: [],\n    style: [],\n    script: []\n  },\n  plugins: [],\n  css: [],\n  modules: [],\n  layouts: {},\n  serverMiddleware: [],\n  ErrorPage: null,\n  loading: {\n    color: 'black',\n    failedColor: 'red',\n    height: '2px',\n    throttle: 200,\n    duration: 5000,\n    rtl: false\n  },\n  loadingIndicator: 'default',\n  transition: {\n    name: 'page',\n    mode: 'out-in',\n    appear: false,\n    appearClass: 'appear',\n    appearActiveClass: 'appear-active',\n    appearToClass: 'appear-to'\n  },\n  layoutTransition: {\n    name: 'layout',\n    mode: 'out-in'\n  },\n  dir: {\n    assets: 'assets',\n    layouts: 'layouts',\n    middleware: 'middleware',\n    pages: 'pages',\n    static: 'static',\n    store: 'store'\n  },\n  vue: {\n    config: {\n      silent: undefined, // = !dev\n      performance: undefined // = dev\n    }\n  },\n  router: {\n    mode: 'history',\n    base: '/',\n    routes: [],\n    middleware: [],\n    linkActiveClass: 'nuxt-link-active',\n    linkExactActiveClass: 'nuxt-link-exact-active',\n    extendRoutes: null,\n    scrollBehavior: null,\n    parseQuery: false,\n    stringifyQuery: false,\n    fallback: false\n  },\n  render: {\n    bundleRenderer: {\n      shouldPrefetch: () => false\n    },\n    resourceHints: true,\n    ssr: undefined,\n    http2: {\n      push: false,\n      shouldPush: null\n    },\n    static: {\n      prefix: true\n    },\n    compressor: {\n      threshold: 0\n    },\n    etag: {\n      weak: false\n    },\n    csp: false,\n    dist: {\n      // Don't serve index.html template\n      index: false,\n      // 1 year in production\n      maxAge: '1y'\n    }\n  },\n  // User-defined changes\n  watch: [],\n  watchers: {\n    webpack: {},\n    chokidar: {\n      ignoreInitial: true\n    }\n  },\n  editor: undefined,\n  hooks: null,\n  messages: {\n    loading: 'Loading...',\n    error_404: 'This page could not be found',\n    server_error: 'Server error',\n    nuxtjs: 'Nuxt.js',\n    back_to_home: 'Back to the home page',\n    server_error_details:\n      'An error occurred in the application and your page could not be served. If you are the application owner, check your logs for details.',\n    client_error: 'Error',\n    client_error_details:\n      'An error occurred while rendering the page. Check developer tools console for details.'\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport _ from 'lodash'\nimport consola from 'consola'\nimport { isPureObject, isUrl, guardDir } from '../common/utils'\n\nimport modes from './modes'\nimport defaults from './nuxt.config'\n\n// hasValue utility\nconst hasValue = v => typeof v === 'string' && v\n\nconst Options = {}\n\nexport default Options\n\nOptions.from = function (_options) {\n  // Clone options to prevent unwanted side-effects\n  const options = Object.assign({}, _options)\n\n  // Normalize options\n  if (options.loading === true) {\n    delete options.loading\n  }\n  if (\n    options.router &&\n    options.router.middleware &&\n    !Array.isArray(options.router.middleware)\n  ) {\n    options.router.middleware = [options.router.middleware]\n  }\n  if (options.router && typeof options.router.base === 'string') {\n    options._routerBaseSpecified = true\n  }\n  if (typeof options.transition === 'string') {\n    options.transition = { name: options.transition }\n  }\n  if (typeof options.layoutTransition === 'string') {\n    options.layoutTransition = { name: options.layoutTransition }\n  }\n  if (typeof options.extensions === 'string') {\n    options.extensions = [options.extensions]\n  }\n\n  options.globalName = (_.isString(options.globalName) && /^[a-zA-Z]+$/.test(options.globalName))\n    ? options.globalName.toLowerCase()\n    : 'nuxt'\n\n  // Resolve rootDir\n  options.rootDir = hasValue(options.rootDir) ? path.resolve(options.rootDir) : process.cwd()\n\n  // Apply defaults by ${buildDir}/dist/build.config.js\n  // TODO: Unsafe operation.\n  // const buildDir = options.buildDir || defaults.buildDir\n  // const buildConfig = resolve(options.rootDir, buildDir, 'build.config.js')\n  // if (existsSync(buildConfig)) {\n  //   _.defaultsDeep(options, require(buildConfig))\n  // }\n\n  // Apply defaults\n  _.defaultsDeep(options, defaults)\n\n  // Check srcDir and generate.dir excistence\n  const hasSrcDir = hasValue(options.srcDir)\n  const hasGenerateDir = hasValue(options.generate.dir)\n\n  // Resolve srcDir\n  options.srcDir = hasSrcDir\n    ? path.resolve(options.rootDir, options.srcDir)\n    : options.rootDir\n\n  // Resolve buildDir\n  options.buildDir = path.resolve(options.rootDir, options.buildDir)\n\n  // Protect rootDir against buildDir\n  guardDir(options, 'rootDir', 'buildDir')\n\n  if (hasGenerateDir) {\n    // Resolve generate.dir\n    options.generate.dir = path.resolve(options.rootDir, options.generate.dir)\n\n    // Protect rootDir against buildDir\n    guardDir(options, 'rootDir', 'generate.dir')\n  }\n\n  if (hasSrcDir) {\n    // Protect srcDir against buildDir\n    guardDir(options, 'srcDir', 'buildDir')\n\n    if (hasGenerateDir) {\n      // Protect srcDir against generate.dir\n      guardDir(options, 'srcDir', 'generate.dir')\n    }\n  }\n\n  // Populate modulesDir\n  options.modulesDir = []\n    .concat(options.modulesDir)\n    .concat(path.join(options.nuxtDir, 'node_modules')).filter(hasValue)\n    .map(dir => path.resolve(options.rootDir, dir))\n\n  const mandatoryExtensions = ['js', 'mjs']\n\n  options.extensions = mandatoryExtensions\n    .filter(ext => !options.extensions.includes(ext))\n    .concat(options.extensions)\n\n  // If app.html is defined, set the template path to the user template\n  if (options.appTemplatePath === undefined) {\n    options.appTemplatePath = path.resolve(options.buildDir, 'views/app.template.html')\n    if (fs.existsSync(path.join(options.srcDir, 'app.html'))) {\n      options.appTemplatePath = path.join(options.srcDir, 'app.html')\n    }\n  } else {\n    options.appTemplatePath = path.resolve(options.srcDir, options.appTemplatePath)\n  }\n\n  // Ignore publicPath on dev\n  /* istanbul ignore if */\n  if (options.dev && isUrl(options.build.publicPath)) {\n    options.build.publicPath = defaults.build.publicPath\n  }\n\n  // If store defined, update store options to true unless explicitly disabled\n  if (\n    options.store !== false &&\n    fs.existsSync(path.join(options.srcDir, options.dir.store)) &&\n    fs.readdirSync(path.join(options.srcDir, options.dir.store))\n      .find(filename => filename !== 'README.md' && filename[0] !== '.')\n  ) {\n    options.store = true\n  }\n\n  // SPA loadingIndicator\n  if (options.loadingIndicator) {\n    // Normalize loadingIndicator\n    if (!isPureObject(options.loadingIndicator)) {\n      options.loadingIndicator = { name: options.loadingIndicator }\n    }\n\n    // Apply defaults\n    options.loadingIndicator = Object.assign(\n      {\n        name: 'default',\n        color: (options.loading && options.loading.color) || '#D3D3D3',\n        color2: '#F5F5F5',\n        background: (options.manifest && options.manifest.theme_color) || 'white',\n        dev: options.dev,\n        loading: options.messages.loading\n      },\n      options.loadingIndicator\n    )\n  }\n\n  // Debug errors\n  if (options.debug === undefined) {\n    options.debug = options.dev\n  }\n\n  // Apply default hash to CSP option\n  const csp = options.render.csp\n  const cspDefaults = {\n    hashAlgorithm: 'sha256',\n    allowedSources: undefined,\n    policies: undefined,\n    reportOnly: options.debug\n  }\n  if (csp) {\n    options.render.csp = _.defaults(_.isObject(csp) ? csp : {}, cspDefaults)\n  }\n\n  // cssSourceMap\n  if (options.build.cssSourceMap === undefined) {\n    options.build.cssSourceMap = options.dev\n  }\n\n  // babel cacheDirectory\n  if (options.build.babel.cacheDirectory === undefined) {\n    options.build.babel.cacheDirectory = options.dev\n  }\n\n  // vue config\n  const vueConfig = options.vue.config\n\n  if (vueConfig.silent === undefined) {\n    vueConfig.silent = !options.dev\n  }\n  if (vueConfig.performance === undefined) {\n    vueConfig.performance = options.dev\n  }\n\n  // merge custom env with variables\n  const eligibleEnvVariables = _.pick(process.env, Object.keys(process.env).filter(k => k.startsWith('NUXT_ENV_')))\n  Object.assign(options.env, eligibleEnvVariables)\n\n  // Normalize ignore\n  options.ignore = options.ignore ? [].concat(options.ignore) : []\n\n  // Append ignorePrefix glob to ignore\n  if (typeof options.ignorePrefix === 'string') {\n    options.ignore.push(`**/${options.ignorePrefix}*.*`)\n  }\n\n  // Compression middleware legacy\n  if (options.render.gzip) {\n    consola.warn('render.gzip is deprecated and will be removed in a future version! Please switch to render.compressor')\n    options.render.compressor = options.render.gzip\n    delete options.render.gzip\n  }\n\n  // Apply mode preset\n  const modePreset = modes[options.mode || 'universal'] || modes.universal\n  _.defaultsDeep(options, modePreset)\n\n  // If no server-side rendering, add appear true transition\n  /* istanbul ignore if */\n  if (options.render.ssr === false && options.transition) {\n    options.transition.appear = true\n  }\n\n  // We assume the SPA fallback path is 404.html (for GitHub Pages, Surge, etc.)\n  if (options.generate.fallback === true) {\n    options.generate.fallback = '404.html'\n  }\n\n  if (options.build.stats === 'none' || options.build.quiet === true) {\n    options.build.stats = false\n  }\n\n  // Vendor backward compatibility with nuxt 1.x\n  if (typeof options.build.vendor !== 'undefined') {\n    delete options.build.vendor\n    consola.warn('vendor has been deprecated due to webpack4 optimization')\n  }\n\n  // TODO: remove when mini-css-extract-plugin supports HMR\n  if (options.dev) {\n    options.build.extractCSS = false\n  }\n\n  // Enable minimize for production builds\n  if (options.build.optimization.minimize === undefined) {\n    options.build.optimization.minimize = !options.dev\n  }\n\n  // Enable optimizeCSS only when extractCSS is enabled\n  if (options.build.optimizeCSS === undefined) {\n    options.build.optimizeCSS = options.build.extractCSS ? {} : false\n  }\n\n  const loaders = options.build.loaders\n  const vueLoader = loaders.vue\n  if (vueLoader.productionMode === undefined) {\n    vueLoader.productionMode = !options.dev\n  }\n  const styleLoaders = [\n    'css', 'cssModules', 'less',\n    'sass', 'scss', 'stylus', 'vueStyle'\n  ]\n  for (const name of styleLoaders) {\n    const loader = loaders[name]\n    if (loader && loader.sourceMap === undefined) {\n      loader.sourceMap = Boolean(options.build.cssSourceMap)\n    }\n  }\n\n  // include SFCs in node_modules\n  options.build.transpile = [].concat(options.build.transpile || [])\n    .map(module => module instanceof RegExp ? module : new RegExp(module))\n\n  if (options.build.quiet === true) {\n    consola.level = 0\n  }\n\n  return options\n}\n","import Vue from 'vue'\nimport VueMeta from 'vue-meta'\nimport { createRenderer } from 'vue-server-renderer'\nimport LRU from 'lru-cache'\n\nexport default class MetaRenderer {\n  constructor(nuxt, renderer) {\n    this.nuxt = nuxt\n    this.renderer = renderer\n    this.options = nuxt.options\n    this.vueRenderer = createRenderer()\n    this.cache = LRU({})\n\n    // Add VueMeta to Vue (this is only for SPA mode)\n    // See lib/app/index.js\n    Vue.use(VueMeta, {\n      keyName: 'head',\n      attribute: 'data-n-head',\n      ssrAttribute: 'data-n-head-ssr',\n      tagIDKeyName: 'hid'\n    })\n  }\n\n  async getMeta(url) {\n    const vm = new Vue({\n      render: h => h(), // Render empty html tag\n      head: this.options.head || {}\n    })\n    await this.vueRenderer.renderToString(vm)\n    return vm.$meta().inject()\n  }\n\n  async render({ url = '/' }) {\n    let meta = this.cache.get(url)\n\n    if (meta) {\n      return meta\n    }\n\n    meta = {\n      HTML_ATTRS: '',\n      BODY_ATTRS: '',\n      HEAD: '',\n      BODY_SCRIPTS: ''\n    }\n\n    // Get vue-meta context\n    const m = await this.getMeta(url)\n\n    // HTML_ATTRS\n    meta.HTML_ATTRS = m.htmlAttrs.text()\n\n    // BODY_ATTRS\n    meta.BODY_ATTRS = m.bodyAttrs.text()\n\n    // HEAD tags\n    meta.HEAD =\n      m.title.text() +\n      m.meta.text() +\n      m.link.text() +\n      m.style.text() +\n      m.script.text() +\n      m.noscript.text()\n\n    // BODY_SCRIPTS\n    meta.BODY_SCRIPTS = m.script.text({ body: true }) + m.noscript.text({ body: true })\n\n    // Resources Hints\n\n    meta.resourceHints = ''\n\n    const clientManifest = this.renderer.resources.clientManifest\n\n    const shouldPreload = this.options.render.bundleRenderer.shouldPreload || (() => true)\n    const shouldPrefetch = this.options.render.bundleRenderer.shouldPrefetch || (() => true)\n\n    if (this.options.render.resourceHints && clientManifest) {\n      const publicPath = clientManifest.publicPath || '/_nuxt/'\n\n      // Preload initial resources\n      if (Array.isArray(clientManifest.initial)) {\n        meta.resourceHints += clientManifest.initial\n          .filter(file => shouldPreload(file))\n          .map(\n            r => `<link rel=\"preload\" href=\"${publicPath}${r}\" as=\"script\" />`\n          )\n          .join('')\n      }\n\n      // Prefetch async resources\n      if (Array.isArray(clientManifest.async)) {\n        meta.resourceHints += clientManifest.async\n          .filter(file => shouldPrefetch(file))\n          .map(r => `<link rel=\"prefetch\" href=\"${publicPath}${r}\" />`)\n          .join('')\n      }\n\n      // Add them to HEAD\n      if (meta.resourceHints) {\n        meta.HEAD += meta.resourceHints\n      }\n    }\n\n    // Emulate getPreloadFiles from vue-server-renderer (works for JS chunks only)\n    meta.getPreloadFiles = () =>\n      clientManifest.initial\n        .filter(file => shouldPreload(file))\n        .map(r => ({\n          file: r,\n          fileWithoutQuery: r,\n          asType: 'script',\n          extension: 'js'\n        }))\n\n    // Set meta tags inside cache\n    this.cache.set(url, meta)\n\n    return meta\n  }\n}\n","import path from 'path'\nimport consola from 'consola'\n\nimport Youch from '@nuxtjs/youch'\nimport fs from 'fs-extra'\n\nexport default function errorMiddleware(err, req, res, next) {\n  // ensure statusCode, message and name fields\n  err.statusCode = err.statusCode || 500\n  err.message = err.message || 'Nuxt Server Error'\n  err.name = !err.name || err.name === 'Error' ? 'NuxtServerError' : err.name\n\n  // We hide actual errors from end users, so show them on server logs\n  if (err.statusCode !== 404) {\n    consola.error(err)\n  }\n\n  const sendResponse = (content, type = 'text/html') => {\n    // Set Headers\n    res.statusCode = err.statusCode\n    res.statusMessage = err.name\n    res.setHeader('Content-Type', type + '; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(content))\n    res.setHeader('Cache-Control', 'no-cache, no-store, max-age=0, must-revalidate')\n\n    // Send Response\n    res.end(content, 'utf-8')\n  }\n\n  // Check if request accepts JSON\n  const hasReqHeader = (header, includes) =>\n    req.headers[header] && req.headers[header].toLowerCase().includes(includes)\n  const isJson =\n    hasReqHeader('accept', 'application/json') ||\n    hasReqHeader('user-agent', 'curl/')\n\n  // Use basic errors when debug mode is disabled\n  if (!this.options.debug) {\n    // Json format is compatible with Youch json responses\n    const json = {\n      status: err.statusCode,\n      message: err.message,\n      name: err.name\n    }\n    if (isJson) {\n      sendResponse(JSON.stringify(json, undefined, 2), 'text/json')\n      return\n    }\n    const html = this.resources.errorTemplate(json)\n    sendResponse(html)\n    return\n  }\n\n  // Show stack trace\n  const youch = new Youch(\n    err,\n    req,\n    readSource.bind(this),\n    this.options.router.base,\n    true\n  )\n  if (isJson) {\n    youch.toJSON().then((json) => {\n      sendResponse(JSON.stringify(json, undefined, 2), 'text/json')\n    })\n  } else {\n    youch.toHTML().then(html => sendResponse(html))\n  }\n}\n\nasync function readSource(frame) {\n  // Remove webpack:/// & query string from the end\n  const sanitizeName = name =>\n    name ? name.replace('webpack:///', '').split('?')[0] : null\n  frame.fileName = sanitizeName(frame.fileName)\n\n  // Return if fileName is unknown\n  /* istanbul ignore if */\n  if (!frame.fileName) {\n    return\n  }\n\n  // Possible paths for file\n  const searchPath = [\n    this.options.srcDir,\n    this.options.rootDir,\n    path.join(this.options.buildDir, 'dist', 'server'),\n    this.options.buildDir,\n    process.cwd()\n  ]\n\n  // Scan filesystem for real source\n  for (const pathDir of searchPath) {\n    const fullPath = path.resolve(pathDir, frame.fileName)\n    const source = await fs.readFile(fullPath, 'utf-8').catch(() => null)\n    if (source) {\n      frame.contents = source\n      frame.fullPath = fullPath\n      if (path.isAbsolute(frame.fileName)) {\n        frame.fileName = path.relative(this.options.rootDir, fullPath)\n      }\n      return\n    }\n  }\n\n  // Fallback: use server bundle\n  // TODO: restore to if after https://github.com/istanbuljs/nyc/issues/595 fixed\n  /* istanbul ignore next */\n  if (!frame.contents) {\n    frame.contents = this.resources.serverBundle.files[frame.fileName]\n  }\n}\n","import generateETag from 'etag'\nimport fresh from 'fresh'\nimport consola from 'consola'\n\nimport { getContext } from '../../common/utils'\n\nexport default async function nuxtMiddleware(req, res, next) {\n  // Get context\n  const context = getContext(req, res)\n\n  res.statusCode = 200\n  try {\n    const result = await this.renderRoute(req.url, context)\n    await this.nuxt.callHook('render:route', req.url, result, context)\n    const {\n      html,\n      cspScriptSrcHashSet,\n      error,\n      redirected,\n      getPreloadFiles\n    } = result\n\n    if (redirected) {\n      this.nuxt.callHook('render:routeDone', req.url, result, context)\n      return html\n    }\n    if (error) {\n      res.statusCode = context.nuxt.error.statusCode || 500\n    }\n\n    // Add ETag header\n    if (!error && this.options.render.etag) {\n      const etag = generateETag(html, this.options.render.etag)\n      if (fresh(req.headers, { etag })) {\n        res.statusCode = 304\n        res.end()\n        this.nuxt.callHook('render:routeDone', req.url, result, context)\n        return\n      }\n      res.setHeader('ETag', etag)\n    }\n\n    // HTTP2 push headers for preload assets\n    if (!error && this.options.render.http2.push) {\n      // Parse resourceHints to extract HTTP.2 prefetch/push headers\n      // https://w3c.github.io/preload/#server-push-http-2\n      const pushAssets = []\n      const preloadFiles = getPreloadFiles()\n      const { shouldPush } = this.options.render.http2\n      const { publicPath } = this.resources.clientManifest\n\n      preloadFiles.forEach(({ file, asType, fileWithoutQuery }) => {\n        // By default, we only preload scripts or css\n        /* istanbul ignore if */\n        if (!shouldPush && asType !== 'script' && asType !== 'style') {\n          return\n        }\n\n        // User wants to explicitly control what to preload\n        if (shouldPush && !shouldPush(fileWithoutQuery, asType)) {\n          return\n        }\n\n        pushAssets.push(`<${publicPath}${file}>; rel=preload; as=${asType}`)\n      })\n\n      // Pass with single Link header\n      // https://blog.cloudflare.com/http-2-server-push-with-multiple-assets-per-link-header\n      // https://www.w3.org/Protocols/9707-link-header.html\n      res.setHeader('Link', pushAssets.join(','))\n    }\n\n    if (this.options.render.csp) {\n      const { allowedSources, policies } = this.options.render.csp\n      const cspHeader = this.options.render.csp.reportOnly ? 'Content-Security-Policy-Report-Only' : 'Content-Security-Policy'\n\n      res.setHeader(cspHeader, getCspString({ cspScriptSrcHashSet, allowedSources, policies, isDev: this.options.dev }))\n    }\n\n    // Send response\n    res.setHeader('Content-Type', 'text/html; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(html))\n    res.end(html, 'utf8')\n    this.nuxt.callHook('render:routeDone', req.url, result, context)\n    return html\n  } catch (err) {\n    /* istanbul ignore if */\n    if (context && context.redirected) {\n      consola.error(err)\n      return err\n    }\n\n    next(err)\n  }\n}\n\nconst getCspString = ({ cspScriptSrcHashSet, allowedSources, policies, isDev }) => {\n  const joinedHashSet = Array.from(cspScriptSrcHashSet).join(' ')\n  const baseCspStr = `script-src 'self'${isDev ? ` 'unsafe-eval'` : ''} ${joinedHashSet}`\n\n  if (Array.isArray(allowedSources)) {\n    return `${baseCspStr} ${allowedSources.join(' ')}`\n  }\n\n  const policyObjectAvailable = typeof policies === 'object' && policies !== null && !Array.isArray(policies)\n\n  if (policyObjectAvailable) {\n    const transformedPolicyObject = transformPolicyObject(policies, cspScriptSrcHashSet)\n\n    return Object.entries(transformedPolicyObject).map(([k, v]) => `${k} ${v.join(' ')}`).join('; ')\n  }\n\n  return baseCspStr\n}\n\nconst transformPolicyObject = (policies, cspScriptSrcHashSet) => {\n  const userHasDefinedScriptSrc = policies['script-src'] && Array.isArray(policies['script-src'])\n\n  // Self is always needed for inline-scripts, so add it, no matter if the user specified script-src himself.\n\n  const hashAndPolicySet = cspScriptSrcHashSet\n  hashAndPolicySet.add(`'self'`)\n\n  if (!userHasDefinedScriptSrc) {\n    policies['script-src'] = Array.from(hashAndPolicySet)\n    return policies\n  }\n\n  new Set(policies['script-src']).forEach(src => hashAndPolicySet.add(src))\n\n  policies['script-src'] = Array.from(hashAndPolicySet)\n\n  return policies\n}\n","import path from 'path'\nimport crypto from 'crypto'\n\nimport devalue from '@nuxtjs/devalue'\nimport serveStatic from 'serve-static'\nimport _ from 'lodash'\nimport fs from 'fs-extra'\nimport { createBundleRenderer } from 'vue-server-renderer'\nimport connect from 'connect'\nimport launchMiddleware from 'launch-editor-middleware'\nimport consola from 'consola'\n\nimport { isUrl, timeout, waitFor, determineGlobals } from '../common/utils'\nimport defaults from '../common/nuxt.config'\n\nimport MetaRenderer from './meta'\nimport errorMiddleware from './middleware/error'\nimport nuxtMiddleware from './middleware/nuxt'\n\nlet jsdom = null\n\nexport default class Renderer {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.globals = determineGlobals(nuxt.options.globalName, nuxt.options.globals)\n\n    // Will be set by createRenderer\n    this.bundleRenderer = null\n    this.metaRenderer = null\n\n    // Will be available on dev\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n\n    // Create new connect instance\n    this.app = connect()\n\n    // Renderer runtime resources\n    this.resources = {\n      clientManifest: null,\n      serverBundle: null,\n      ssrTemplate: null,\n      spaTemplate: null,\n      errorTemplate: parseTemplate('Nuxt.js Internal Server Error')\n    }\n  }\n\n  async ready() {\n    await this.nuxt.callHook('render:before', this, this.options.render)\n    // Setup nuxt middleware\n    await this.setupMiddleware()\n\n    // Production: Load SSR resources from fs\n    if (!this.options.dev) {\n      await this.loadResources()\n    }\n\n    // Call done hook\n    await this.nuxt.callHook('render:done', this)\n  }\n\n  async loadResources(_fs = fs) {\n    const distPath = path.resolve(this.options.buildDir, 'dist', 'server')\n    const updated = []\n\n    resourceMap.forEach(({ key, fileName, transform }) => {\n      const rawKey = '$$' + key\n      const _path = path.join(distPath, fileName)\n\n      if (!_fs.existsSync(_path)) {\n        return // Resource not exists\n      }\n      const rawData = _fs.readFileSync(_path, 'utf8')\n      if (!rawData || rawData === this.resources[rawKey]) {\n        return // No changes\n      }\n      this.resources[rawKey] = rawData\n      const data = transform(rawData)\n      /* istanbul ignore if */\n      if (!data) {\n        return // Invalid data ?\n      }\n      this.resources[key] = data\n      updated.push(key)\n    })\n\n    // Reload error template\n    const errorTemplatePath = path.resolve(this.options.buildDir, 'views/error.html')\n    if (fs.existsSync(errorTemplatePath)) {\n      this.resources.errorTemplate = parseTemplate(\n        fs.readFileSync(errorTemplatePath, 'utf8')\n      )\n    }\n\n    // Load loading template\n    const loadingHTMLPath = path.resolve(this.options.buildDir, 'loading.html')\n    if (fs.existsSync(loadingHTMLPath)) {\n      this.resources.loadingHTML = fs.readFileSync(loadingHTMLPath, 'utf8')\n      this.resources.loadingHTML = this.resources.loadingHTML\n        .replace(/\\r|\\n|[\\t\\s]{3,}/g, '')\n    } else {\n      this.resources.loadingHTML = ''\n    }\n\n    // Call resourcesLoaded plugin\n    await this.nuxt.callHook('render:resourcesLoaded', this.resources)\n\n    if (updated.length > 0) {\n      this.createRenderer()\n    }\n  }\n\n  get noSSR() {\n    return this.options.render.ssr === false\n  }\n\n  get isReady() {\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    return Boolean(this.bundleRenderer && this.resources.ssrTemplate)\n  }\n\n  get isResourcesAvailable() {\n    // Required for both\n    /* istanbul ignore if */\n    if (!this.resources.clientManifest) {\n      return false\n    }\n\n    // Required for SPA rendering\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    // Required for bundle renderer\n    return Boolean(this.resources.ssrTemplate && this.resources.serverBundle)\n  }\n\n  createRenderer() {\n    // Ensure resources are available\n    if (!this.isResourcesAvailable) {\n      return\n    }\n\n    // Create Meta Renderer\n    this.metaRenderer = new MetaRenderer(this.nuxt, this)\n\n    // Skip following steps if noSSR mode\n    if (this.noSSR) {\n      return\n    }\n\n    const hasModules = fs.existsSync(path.resolve(this.options.rootDir, 'node_modules'))\n    // Create bundle renderer for SSR\n    this.bundleRenderer = createBundleRenderer(\n      this.resources.serverBundle,\n      Object.assign(\n        {\n          clientManifest: this.resources.clientManifest,\n          runInNewContext: false,\n          // for globally installed nuxt command, search dependencies in global dir\n          basedir: hasModules ? this.options.rootDir : __dirname\n        },\n        this.options.render.bundleRenderer\n      )\n    )\n  }\n\n  useMiddleware(m) {\n    // Resolve\n    const $m = m\n    if (typeof m === 'string') {\n      m = this.nuxt.requireModule(m)\n    }\n    if (typeof m.handler === 'string') {\n      m.handler = this.nuxt.requireModule(m.handler)\n    }\n\n    const handler = m.handler || m\n    const path = (\n      (m.prefix !== false ? this.options.router.base : '') +\n      (typeof m.path === 'string' ? m.path : '')\n    ).replace(/\\/\\//g, '/')\n\n    handler.$m = $m\n\n    // Use middleware\n    this.app.use(path, handler)\n  }\n\n  get publicPath() {\n    return isUrl(this.options.build.publicPath)\n      ? defaults.build.publicPath\n      : this.options.build.publicPath\n  }\n\n  async setupMiddleware() {\n    // Apply setupMiddleware from modules first\n    await this.nuxt.callHook('render:setupMiddleware', this.app)\n\n    // Compression middleware for production\n    if (!this.options.dev) {\n      const compressor = this.options.render.compressor\n      if (typeof compressor === 'object') {\n        // If only setting for `compression` are provided, require the module and insert\n        // Prefer require instead of requireModule to keep dependency in nuxt-start\n        const compression = require('compression')\n        this.useMiddleware(compression(compressor))\n      } else {\n        // Else, require own compression middleware\n        this.useMiddleware(compressor)\n      }\n    }\n\n    // Add webpack middleware only for development\n    if (this.options.dev) {\n      this.useMiddleware(async (req, res, next) => {\n        if (this.webpackDevMiddleware) {\n          await this.webpackDevMiddleware(req, res)\n        }\n        if (this.webpackHotMiddleware) {\n          await this.webpackHotMiddleware(req, res)\n        }\n        next()\n      })\n    }\n\n    // open in editor for debug mode only\n    if (this.options.debug && this.options.dev) {\n      this.useMiddleware({\n        path: '__open-in-editor',\n        handler: launchMiddleware(this.options.editor)\n      })\n    }\n\n    // For serving static/ files to /\n    const staticMiddleware = serveStatic(\n      path.resolve(this.options.srcDir, this.options.dir.static),\n      this.options.render.static\n    )\n    staticMiddleware.prefix = this.options.render.static.prefix\n    this.useMiddleware(staticMiddleware)\n\n    // Serve .nuxt/dist/ files only for production\n    // For dev they will be served with devMiddleware\n    if (!this.options.dev) {\n      const distDir = path.resolve(this.options.buildDir, 'dist', 'client')\n      this.useMiddleware({\n        path: this.publicPath,\n        handler: serveStatic(\n          distDir,\n          this.options.render.dist\n        )\n      })\n    }\n\n    // Add User provided middleware\n    this.options.serverMiddleware.forEach((m) => {\n      this.useMiddleware(m)\n    })\n\n    // Finally use nuxtMiddleware\n    this.useMiddleware(nuxtMiddleware.bind(this))\n\n    // Error middleware for errors that occurred in middleware that declared above\n    // Middleware should exactly take 4 arguments\n    // https://github.com/senchalabs/connect#error-middleware\n\n    // Apply errorMiddleware from modules first\n    await this.nuxt.callHook('render:errorMiddleware', this.app)\n\n    // Apply errorMiddleware from Nuxt\n    this.useMiddleware(errorMiddleware.bind(this))\n  }\n\n  renderTemplate(ssr, opts) {\n    // Fix problem with HTMLPlugin's minify option (#3392)\n    opts.html_attrs = opts.HTML_ATTRS\n    opts.body_attrs = opts.BODY_ATTRS\n\n    const fn = ssr ? this.resources.ssrTemplate : this.resources.spaTemplate\n\n    return fn(opts)\n  }\n\n  async renderRoute(url, context = {}) {\n    /* istanbul ignore if */\n    if (!this.isReady) {\n      await waitFor(1000)\n      return this.renderRoute(url, context)\n    }\n\n    // Log rendered url\n    consola.debug(`Rendering url ${url}`)\n\n    // Add url and isSever to the context\n    context.url = url\n\n    // Basic response if SSR is disabled or spa data provided\n    const spa = context.spa || (context.res && context.res.spa)\n    const ENV = this.options.env\n\n    if (this.noSSR || spa) {\n      const {\n        HTML_ATTRS,\n        BODY_ATTRS,\n        HEAD,\n        BODY_SCRIPTS,\n        getPreloadFiles\n      } = await this.metaRenderer.render(context)\n      const APP =\n        `<div id=\"${this.globals.id}\">${this.resources.loadingHTML}</div>` + BODY_SCRIPTS\n\n      // Detect 404 errors\n      if (\n        url.includes(this.options.build.publicPath) ||\n        url.includes('__webpack')\n      ) {\n        const err = {\n          statusCode: 404,\n          message: this.options.messages.error_404,\n          name: 'ResourceNotFound'\n        }\n        throw err\n      }\n\n      const html = this.renderTemplate(false, {\n        HTML_ATTRS,\n        BODY_ATTRS,\n        HEAD,\n        APP,\n        ENV\n      })\n\n      return { html, getPreloadFiles }\n    }\n\n    // Call renderToString from the bundleRenderer and generate the HTML (will update the context as well)\n    let APP = await this.bundleRenderer.renderToString(context)\n\n    if (!context.nuxt.serverRendered) {\n      APP = `<div id=\"${this.globals.id}\"></div>`\n    }\n    const m = context.meta.inject()\n    let HEAD =\n      m.title.text() +\n      m.meta.text() +\n      m.link.text() +\n      m.style.text() +\n      m.script.text() +\n      m.noscript.text()\n    if (this.options._routerBaseSpecified) {\n      HEAD += `<base href=\"${this.options.router.base}\">`\n    }\n\n    if (this.options.render.resourceHints) {\n      HEAD += context.renderResourceHints()\n    }\n\n    await this.nuxt.callHook('render:routeContext', context.nuxt)\n\n    const serializedSession = `window.${this.globals.context}=${devalue(context.nuxt)};`\n\n    const cspScriptSrcHashSet = new Set()\n    if (this.options.render.csp) {\n      const { hashAlgorithm } = this.options.render.csp\n      const hash = crypto.createHash(hashAlgorithm)\n      hash.update(serializedSession)\n      cspScriptSrcHashSet.add(`'${hashAlgorithm}-${hash.digest('base64')}'`)\n    }\n\n    APP += `<script>${serializedSession}</script>`\n    APP += context.renderScripts()\n    APP += m.script.text({ body: true })\n    APP += m.noscript.text({ body: true })\n\n    HEAD += context.renderStyles()\n\n    const html = this.renderTemplate(true, {\n      HTML_ATTRS: 'data-n-head-ssr ' + m.htmlAttrs.text(),\n      BODY_ATTRS: m.bodyAttrs.text(),\n      HEAD,\n      APP,\n      ENV\n    })\n\n    return {\n      html,\n      cspScriptSrcHashSet,\n      getPreloadFiles: context.getPreloadFiles,\n      error: context.nuxt.error,\n      redirected: context.redirected\n    }\n  }\n\n  async renderAndGetWindow(url, opts = {}) {\n    /* istanbul ignore if */\n    if (!jsdom) {\n      try {\n        jsdom = require('jsdom')\n      } catch (e) /* istanbul ignore next */ {\n        consola.error(`\n         Fail when calling nuxt.renderAndGetWindow(url)\n         jsdom module is not installed\n         Please install jsdom with: npm install --save-dev jsdom\n        `)\n        throw e\n      }\n    }\n    const options = Object.assign({\n      resources: 'usable', // load subresources (https://github.com/tmpvar/jsdom#loading-subresources)\n      runScripts: 'dangerously',\n      virtualConsole: true,\n      beforeParse(window) {\n        // Mock window.scrollTo\n        window.scrollTo = () => {}\n      }\n    }, opts)\n    const jsdomErrHandler = (err) => { throw err }\n    if (options.virtualConsole) {\n      if (options.virtualConsole === true) {\n        options.virtualConsole = new jsdom.VirtualConsole().sendTo(consola)\n      }\n      // throw error when window creation failed\n      options.virtualConsole.on('jsdomError', jsdomErrHandler)\n    }\n    url = url || 'http://localhost:3000'\n    const { window } = await jsdom.JSDOM.fromURL(url, options)\n    // If Nuxt could not be loaded (error from the server-side)\n    const nuxtExists = window.document.body.innerHTML.includes(\n      this.options.render.ssr ? `window.${this.globals.context}` : `<div id=\"${this.globals.id}\">`\n    )\n    /* istanbul ignore if */\n    if (!nuxtExists) {\n      const error = new Error('Could not load the nuxt app')\n      error.body = window.document.body.innerHTML\n      throw error\n    }\n    // Used by nuxt.js to say when the components are loaded and the app ready\n    const onNuxtLoaded = this.globals.loadedCallback\n    await timeout(new Promise((resolve) => {\n      window[onNuxtLoaded] = () => resolve(window)\n    }), 20000, 'Components loading in renderAndGetWindow was not completed in 20s')\n    if (options.virtualConsole) {\n      // after window initialized successfully\n      options.virtualConsole.removeListener('jsdomError', jsdomErrHandler)\n    }\n    // Send back window object\n    return window\n  }\n}\n\nconst parseTemplate = templateStr =>\n  _.template(templateStr, {\n    interpolate: /{{([\\s\\S]+?)}}/g\n  })\n\nexport const resourceMap = [\n  {\n    key: 'clientManifest',\n    fileName: 'vue-ssr-client-manifest.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'serverBundle',\n    fileName: 'server-bundle.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'ssrTemplate',\n    fileName: 'index.ssr.html',\n    transform: parseTemplate\n  },\n  {\n    key: 'spaTemplate',\n    fileName: 'index.spa.html',\n    transform: parseTemplate\n  }\n]\n","import Module from 'module'\nimport { resolve, join } from 'path'\nimport https from 'https'\n\nimport enableDestroy from 'server-destroy'\nimport _ from 'lodash'\nimport fs from 'fs-extra'\nimport consola from 'consola'\nimport chalk from 'chalk'\nimport esm from 'esm'\nimport ip from 'ip'\n\nimport Options from '../common/options'\nimport { sequence, startsWithRootAlias, startsWithSrcAlias } from '../common/utils'\nimport packageJSON from '../../package.json'\n\nimport ModuleContainer from './module'\nimport Renderer from './renderer'\n\nexport default class Nuxt {\n  constructor(options = {}) {\n    this.options = Options.from(options)\n\n    this.readyMessage = null\n    this.initialized = false\n\n    // Hooks\n    this._hooks = {}\n    this.hook = this.hook.bind(this)\n\n    // Create instance of core components\n    this.moduleContainer = new ModuleContainer(this)\n    this.renderer = new Renderer(this)\n\n    // Backward compatibility\n    this.render = this.renderer.app\n    this.renderRoute = this.renderer.renderRoute.bind(this.renderer)\n    this.renderAndGetWindow = this.renderer.renderAndGetWindow.bind(\n      this.renderer\n    )\n    this.resolvePath = this.resolvePath.bind(this)\n    this.resolveAlias = this.resolveAlias.bind(this)\n\n    // ESM Loader\n    this.esm = esm(module, {})\n\n    this._ready = this.ready().catch((err) => {\n      consola.fatal(err)\n    })\n  }\n\n  static get version() {\n    return packageJSON.version\n  }\n\n  async ready() {\n    if (this._ready) {\n      return this._ready\n    }\n\n    // Add hooks\n    if (_.isPlainObject(this.options.hooks)) {\n      this.addHooks(this.options.hooks)\n    } else if (typeof this.options.hooks === 'function') {\n      this.options.hooks(this.hook)\n    }\n\n    // Await for modules\n    await this.moduleContainer.ready()\n\n    // Await for renderer to be ready\n    await this.renderer.ready()\n\n    this.initialized = true\n\n    // Call ready hook\n    await this.callHook('ready', this)\n\n    return this\n  }\n\n  hook(name, fn) {\n    if (!name || typeof fn !== 'function') {\n      return\n    }\n    if (name === 'render:context') {\n      name = 'render:routeContext'\n      consola.warn('render:context hook has been deprecated, please use render:routeContext')\n    }\n    this._hooks[name] = this._hooks[name] || []\n    this._hooks[name].push(fn)\n  }\n\n  async callHook(name, ...args) {\n    if (!this._hooks[name]) {\n      return\n    }\n    consola.debug(`Call ${name} hooks (${this._hooks[name].length})`)\n    try {\n      await sequence(this._hooks[name], fn => fn(...args))\n    } catch (err) {\n      consola.error(err)\n      this.callHook('error', err)\n    }\n  }\n\n  clearHook(name) {\n    if (name) {\n      delete this._hooks[name]\n    }\n  }\n\n  flatHooks(configHooks, hooks = {}, parentName) {\n    Object.keys(configHooks).forEach((key) => {\n      const subHook = configHooks[key]\n      const name = parentName ? `${parentName}:${key}` : key\n      if (typeof subHook === 'object' && subHook !== null) {\n        this.flatHooks(subHook, hooks, name)\n      } else {\n        hooks[name] = subHook\n      }\n    })\n    return hooks\n  }\n\n  addHooks(configHooks) {\n    const hooks = this.flatHooks(configHooks)\n    Object.keys(hooks).filter(Boolean).forEach((key) => {\n      [].concat(hooks[key]).forEach(h => this.hook(key, h))\n    })\n  }\n\n  showReady(clear = true) {\n    if (!this.readyMessage) {\n      return\n    }\n    consola.ready({\n      message: this.readyMessage,\n      badge: true,\n      clear\n    })\n    this.readyMessage = null\n  }\n\n  listen(port, host, socket) {\n    return this.ready().then(() => new Promise((resolve, reject) => {\n      if (!socket && typeof this.options.server.socket === 'string') {\n        socket = this.options.server.socket\n      }\n\n      const args = { exclusive: false }\n\n      if (socket) {\n        args.path = socket\n      } else {\n        args.port = port || this.options.server.port\n        args.host = host || this.options.server.host\n      }\n\n      let appServer\n      const isHttps = Boolean(this.options.server.https)\n\n      if (isHttps) {\n        let httpsOptions\n\n        if (this.options.server.https === true) {\n          httpsOptions = {}\n        } else {\n          httpsOptions = this.options.server.https\n        }\n\n        appServer = https.createServer(httpsOptions, this.renderer.app)\n      } else {\n        appServer = this.renderer.app\n      }\n\n      const server = appServer.listen(\n        args,\n        (err) => {\n          /* istanbul ignore if */\n          if (err) {\n            return reject(err)\n          }\n\n          let listenURL\n\n          if (!socket) {\n            ({ address: host, port } = server.address())\n            if (host === '127.0.0.1') {\n              host = 'localhost'\n            } else if (host === '0.0.0.0') {\n              host = ip.address()\n            }\n\n            listenURL = chalk.underline.blue(`http${isHttps ? 's' : ''}://${host}:${port}`)\n            this.readyMessage = `Listening on ${listenURL}`\n          } else {\n            listenURL = chalk.underline.blue(`unix+http://${socket}`)\n            this.readyMessage = `Listening on ${listenURL}`\n          }\n\n          // Close server on nuxt close\n          this.hook(\n            'close',\n            () =>\n              new Promise((resolve, reject) => {\n                // Destroy server by forcing every connection to be closed\n                server.listening && server.destroy((err) => {\n                  consola.debug('server closed')\n                  /* istanbul ignore if */\n                  if (err) {\n                    return reject(err)\n                  }\n                  resolve()\n                })\n              })\n          )\n\n          if (socket) {\n            this.callHook('listen', server, { path: socket }).then(resolve)\n          } else {\n            this.callHook('listen', server, { port, host }).then(resolve)\n          }\n        }\n      )\n\n      // Add server.destroy(cb) method\n      enableDestroy(server)\n    }))\n  }\n\n  resolveModule(path) {\n    try {\n      const resolvedPath = Module._resolveFilename(path, {\n        paths: this.options.modulesDir\n      })\n\n      return resolvedPath\n    } catch (error) {\n      if (error.code === 'MODULE_NOT_FOUND') {\n        return null\n      } else {\n        throw error\n      }\n    }\n  }\n\n  resolveAlias(path) {\n    const modulePath = this.resolveModule(path)\n\n    // Try to resolve it as if it were a regular node_module\n    // Package first. Fixes issue with @<org> scoped packages\n    if (modulePath != null) {\n      return modulePath\n    }\n\n    if (startsWithRootAlias(path)) {\n      return join(this.options.rootDir, path.substr(2))\n    }\n\n    if (startsWithSrcAlias(path)) {\n      return join(this.options.srcDir, path.substr(1))\n    }\n\n    return resolve(this.options.srcDir, path)\n  }\n\n  resolvePath(path) {\n    const _path = this.resolveAlias(path)\n\n    if (fs.existsSync(_path)) {\n      return _path\n    }\n\n    for (const ext of this.options.extensions) {\n      if (fs.existsSync(_path + '.' + ext)) {\n        return _path + '.' + ext\n      }\n    }\n\n    throw new Error(`Cannot resolve \"${path}\" from \"${_path}\"`)\n  }\n\n  requireModule(_path, opts = {}) {\n    const _resolvedPath = this.resolvePath(_path)\n    const m = opts.esm === false ? require(_resolvedPath) : this.esm(_resolvedPath)\n    return (m && m.default) || m\n  }\n\n  async close(callback) {\n    await this.callHook('close', this)\n\n    /* istanbul ignore if */\n    if (typeof callback === 'function') {\n      await callback()\n    }\n  }\n}\n","import Module from './module'\nimport Nuxt from './nuxt'\nimport Renderer from './renderer'\n\nexport default {\n  Nuxt,\n  Module,\n  Renderer\n}\n","import path from 'path'\n\nimport { warmup } from 'thread-loader'\n\n// https://github.com/webpack-contrib/thread-loader\n// https://github.com/webpack-contrib/cache-loader\n\nexport default class PerfLoader {\n  constructor(options) {\n    this.options = options\n    this.warmup = warmup\n    this.workerPools = {\n      js: {\n        name: 'js',\n        poolTimeout: this.options.dev ? Infinity : 2000\n      },\n      css: {\n        name: 'css',\n        poolTimeout: this.options.dev ? Infinity : 2000\n      }\n    }\n  }\n\n  warmupAll() {\n    this.warmup(this.workerPools.js, ['babel-loader', '@babel/preset-env'])\n    this.warmup(this.workerPools.css, ['css-loader'])\n  }\n\n  pool(poolName, _loaders) {\n    const loaders = [].concat(_loaders)\n\n    if (this.options.build.parallel) {\n      const pool = this.workerPools[poolName]\n\n      if (pool) {\n        loaders.unshift({\n          loader: 'thread-loader',\n          options: pool\n        })\n      }\n    }\n\n    if (this.options.build.cache) {\n      loaders.unshift({\n        loader: 'cache-loader',\n        options: {\n          cacheDirectory: path.resolve('node_modules/.cache/cache-loader')\n        }\n      })\n    }\n\n    return loaders\n  }\n\n  poolOneOf(poolName, oneOfRules) {\n    return oneOfRules.map(rule => Object.assign({}, rule, {\n      use: this.pool(poolName, rule.use)\n    }))\n  }\n}\n","import chalk from 'chalk'\n\nconst prefix = `[vue-server-renderer-webpack-plugin]`\nexport const warn = msg => console.error(chalk.red(`${prefix} ${msg}\\n`)) // eslint-disable-line no-console\nexport const tip = msg => console.log(chalk.yellow(`${prefix} ${msg}\\n`)) // eslint-disable-line no-console\n\nexport const validate = (compiler) => {\n  if (compiler.options.target !== 'node') {\n    warn('webpack config `target` should be \"node\".')\n  }\n\n  if (compiler.options.output && compiler.options.output.libraryTarget !== 'commonjs2') {\n    warn('webpack config `output.libraryTarget` should be \"commonjs2\".')\n  }\n\n  if (!compiler.options.externals) {\n    tip(\n      'It is recommended to externalize dependencies in the server build for ' +\n      'better build performance.'\n    )\n  }\n}\n\nexport const onEmit = (compiler, name, hook) => {\n  if (compiler.hooks) {\n    // Webpack >= 4.0.0\n    compiler.hooks.emit.tapAsync(name, hook)\n  } else {\n    // Webpack < 4.0.0\n    compiler.plugin('emit', hook)\n  }\n}\n\nexport const isJS = file => /\\.js(\\?[^.]+)?$/.test(file)\n\nexport const isCSS = file => /\\.css(\\?[^.]+)?$/.test(file)\n","import hash from 'hash-sum'\nimport { uniq } from 'lodash'\nimport { isJS, isCSS, onEmit } from './util'\n\nexport default class VueSSRClientPlugin {\n  constructor(options = {}) {\n    this.options = Object.assign({\n      filename: 'vue-ssr-client-manifest.json'\n    }, options)\n  }\n\n  apply(compiler) {\n    onEmit(compiler, 'vue-client-plugin', (compilation, cb) => {\n      const stats = compilation.getStats().toJson()\n\n      const allFiles = uniq(stats.assets\n        .map(a => a.name))\n\n      const initialFiles = uniq(Object.keys(stats.entrypoints)\n        .map(name => stats.entrypoints[name].assets)\n        .reduce((assets, all) => all.concat(assets), [])\n        .filter(file => isJS(file) || isCSS(file)))\n\n      const asyncFiles = allFiles\n        .filter(file => isJS(file) || isCSS(file))\n        .filter(file => !initialFiles.includes(file))\n\n      const manifest = {\n        publicPath: stats.publicPath,\n        all: allFiles,\n        initial: initialFiles,\n        async: asyncFiles,\n        modules: { /* [identifier: string]: Array<index: number> */ }\n      }\n\n      const assetModules = stats.modules.filter(m => m.assets.length)\n      const fileToIndex = file => manifest.all.indexOf(file)\n      stats.modules.forEach((m) => {\n        // ignore modules duplicated in multiple chunks\n        if (m.chunks.length === 1) {\n          const cid = m.chunks[0]\n          const chunk = stats.chunks.find(c => c.id === cid)\n          if (!chunk || !chunk.files) {\n            return\n          }\n          const id = m.identifier.replace(/\\s\\w+$/, '') // remove appended hash\n          const files = manifest.modules[hash(id)] = chunk.files.map(fileToIndex)\n          // find all asset modules associated with the same chunk\n          assetModules.forEach((m) => {\n            if (m.chunks.some(id => id === cid)) {\n              files.push.apply(files, m.assets.map(fileToIndex))\n            }\n          })\n        }\n      })\n\n      // const debug = (file, obj) => {\n      //   require('fs').writeFileSync(__dirname + '/' + file, JSON.stringify(obj, null, 2))\n      // }\n      // debug('stats.json', stats)\n      // debug('client-manifest.json', manifest)\n\n      const json = JSON.stringify(manifest, null, 2)\n      compilation.assets[this.options.filename] = {\n        source: () => json,\n        size: () => json.length\n      }\n      cb()\n    })\n  }\n}\n","import fs from 'fs'\nimport path from 'path'\n\nimport _ from 'lodash'\nimport createResolver from 'postcss-import-resolver'\n\nimport { isPureObject } from '../../../common/utils'\n\nexport default class PostcssConfig {\n  constructor(options, nuxt) {\n    this.nuxt = nuxt\n    this.dev = options.dev\n    this.postcss = options.build.postcss\n    this.srcDir = options.srcDir\n    this.rootDir = options.rootDir\n    this.cssSourceMap = options.build.cssSourceMap\n    this.modulesDir = options.modulesDir\n  }\n\n  get defaultConfig() {\n    return {\n      sourceMap: this.cssSourceMap,\n      plugins: {\n        // https://github.com/postcss/postcss-import\n        'postcss-import': {\n          resolve: createResolver({\n            alias: {\n              '~': path.join(this.srcDir),\n              '~~': path.join(this.rootDir),\n              '@': path.join(this.srcDir),\n              '@@': path.join(this.rootDir)\n            },\n            modules: [\n              this.srcDir,\n              this.rootDir,\n              ...this.modulesDir\n            ]\n          })\n        },\n\n        // https://github.com/postcss/postcss-url\n        'postcss-url': {},\n\n        // https://github.com/csstools/postcss-preset-env\n        'postcss-preset-env': this.preset || {},\n        'cssnano': this.dev ? false : { preset: 'default' }\n      }\n    }\n  }\n\n  searchConfigFile() {\n    // Search for postCSS config file and use it if exists\n    // https://github.com/michael-ciniawsky/postcss-load-config\n    for (const dir of [this.srcDir, this.rootDir]) {\n      for (const file of [\n        'postcss.config.js',\n        '.postcssrc.js',\n        '.postcssrc',\n        '.postcssrc.json',\n        '.postcssrc.yaml'\n      ]) {\n        const configFile = path.resolve(dir, file)\n        if (fs.existsSync(configFile)) {\n          return configFile\n        }\n      }\n    }\n  }\n\n  configFromFile() {\n    const loaderConfig = (this.postcss && this.postcss.config) || {}\n    loaderConfig.path = loaderConfig.path || this.searchConfigFile()\n\n    if (loaderConfig.path) {\n      return {\n        sourceMap: this.cssSourceMap,\n        config: loaderConfig\n      }\n    }\n  }\n\n  normalize(config) {\n    if (Array.isArray(config)) {\n      config = { plugins: config }\n    }\n    return config\n  }\n\n  loadPlugins(config) {\n    const plugins = config.plugins\n    if (isPureObject(plugins)) {\n      // Map postcss plugins into instances on object mode once\n      config.plugins = Object.keys(plugins)\n        .map((p) => {\n          const plugin = require(p)\n          const opts = plugins[p]\n          if (opts === false) return // Disabled\n          const instance = plugin(opts)\n          return instance\n        })\n        .filter(e => e)\n    }\n  }\n\n  config() {\n    /* istanbul ignore if */\n    if (!this.postcss) {\n      return false\n    }\n\n    let config = this.configFromFile()\n    if (config) {\n      return config\n    }\n\n    config = this.normalize(_.cloneDeep(this.postcss))\n\n    // Apply default plugins\n    if (isPureObject(config)) {\n      if (config.preset) {\n        this.preset = config.preset\n        delete config.preset\n      }\n      if (Array.isArray(config.plugins)) {\n        _.defaults(config, this.defaultConfig)\n      } else {\n        // Keep the order of default plugins\n        config = _.merge({}, this.defaultConfig, config)\n        this.loadPlugins(config)\n      }\n      return config\n    }\n  }\n}\n","import MiniCssExtractPlugin from 'mini-css-extract-plugin'\nimport { wrapArray } from '../../../common/utils'\nimport PostcssConfig from './postcss'\n\nexport default class StyleLoader {\n  constructor(options, nuxt, { isServer }) {\n    this.isServer = isServer\n    this.dev = options.dev\n    this.srcDir = options.srcDir\n    this.assetsDir = options.dir.assets\n    this.staticDir = options.dir.static\n    this.loaders = options.build.loaders\n    this.extractCSS = options.build.extractCSS\n    this.resources = options.build.styleResources\n    this.sourceMap = Boolean(options.build.cssSourceMap)\n\n    if (options.build.postcss) {\n      this.postcssConfig = new PostcssConfig(options, nuxt)\n    }\n  }\n\n  normalize(loaders) {\n    loaders = wrapArray(loaders)\n    return loaders.map(loader => (typeof loader === 'string' ? { loader } : loader))\n  }\n\n  styleResource(ext) {\n    const extResource = this.resources[ext]\n    // style-resources-loader\n    // https://github.com/yenshih/style-resources-loader\n    if (extResource) {\n      const patterns = wrapArray(extResource)\n\n      return {\n        loader: 'style-resources-loader',\n        options: Object.assign(\n          { patterns },\n          this.resources.options || {}\n        )\n      }\n    }\n  }\n\n  postcss() {\n    // postcss-loader\n    // https://github.com/postcss/postcss-loader\n    if (this.postcssConfig) {\n      const config = this.postcssConfig.config()\n      if (config) {\n        return {\n          loader: 'postcss-loader',\n          options: Object.assign({ sourceMap: this.sourceMap }, config)\n        }\n      }\n    }\n  }\n\n  css(options) {\n    return {\n      loader: (this.isServer && this.extractCSS) ? 'css-loader/locals' : 'css-loader',\n      options\n    }\n  }\n\n  cssModules(options) {\n    options.modules = true\n    return {\n      loader: 'css-loader',\n      options\n    }\n  }\n\n  extract() {\n    if (this.extractCSS && !this.isServer) {\n      return MiniCssExtractPlugin.loader\n    }\n  }\n\n  vueStyle() {\n    // https://github.com/vuejs/vue-style-loader\n    return {\n      loader: 'vue-style-loader',\n      options: this.loaders.vueStyle\n    }\n  }\n\n  apply(ext, loaders = []) {\n    const customLoaders = [].concat(\n      this.postcss(loaders),\n      this.normalize(loaders),\n      this.styleResource(ext)\n    ).filter(Boolean)\n\n    const { css: cssOptions, cssModules: cssModulesOptions } = this.loaders\n    cssOptions.importLoaders = cssModulesOptions.importLoaders = customLoaders.length\n\n    const styleLoader = this.extract() || this.vueStyle()\n\n    return [\n      // This matches <style module>\n      {\n        resourceQuery: /module/,\n        use: [].concat(\n          styleLoader,\n          this.cssModules(cssModulesOptions),\n          customLoaders\n        )\n      },\n      // This matches plain <style> or <style scoped>\n      {\n        use: [].concat(\n          styleLoader,\n          this.css(cssOptions),\n          customLoaders\n        )\n      }\n    ]\n  }\n}\n","export default class WarnFixPlugin {\n  apply(compiler) /* istanbul ignore next */ {\n    compiler.hooks.done.tap('warnfix-plugin', (stats) => {\n      stats.compilation.warnings = stats.compilation.warnings.filter((warn) => {\n        if (\n          warn.name === 'ModuleDependencyWarning' &&\n          warn.message.includes(`export 'default'`) &&\n          warn.message.includes('nuxt_plugin_')\n        ) {\n          return false\n        }\n        return true\n      })\n    })\n  }\n}\n","\nexport default class StatsPlugin {\n  constructor(statsOptions) {\n    this.statsOptions = statsOptions\n  }\n\n  apply(compiler) {\n    compiler.hooks.done.tap('stats-plugin', (stats) => {\n      process.stdout.write(\n        '\\n' +\n          stats.toString(this.statsOptions) +\n          '\\n'\n      )\n    })\n  }\n}\n","import path from 'path'\nimport consola from 'consola'\n\nimport TimeFixPlugin from 'time-fix-plugin'\nimport _ from 'lodash'\nimport VueLoader from 'vue-loader'\nimport MiniCssExtractPlugin from 'mini-css-extract-plugin'\nimport WebpackBar from 'webpackbar'\n\nimport { isUrl, urlJoin } from '../../common/utils'\nimport StyleLoader from './utils/style-loader'\nimport WarnFixPlugin from './plugins/warnfix'\nimport StatsPlugin from './plugins/stats'\n\nexport default class WebpackBaseConfig {\n  constructor(builder, options) {\n    this.name = options.name\n    this.isServer = options.isServer\n    this.builder = builder\n    this.nuxt = this.builder.nuxt\n    this.isStatic = builder.isStatic\n    this.options = builder.options\n    this.spinner = builder.spinner\n    this.loaders = this.options.build.loaders\n  }\n\n  get nuxtEnv() {\n    return {\n      isDev: this.options.dev,\n      isServer: this.isServer,\n      isClient: !this.isServer\n    }\n  }\n\n  getBabelOptions() {\n    const options = _.clone(this.options.build.babel)\n\n    if (typeof options.presets === 'function') {\n      options.presets = options.presets({ isServer: this.isServer })\n    }\n\n    if (!options.babelrc && !options.presets) {\n      options.presets = [\n        [\n          require.resolve('@nuxtjs/babel-preset-app'),\n          {\n            buildTarget: this.isServer ? 'server' : 'client'\n          }\n        ]\n      ]\n    }\n\n    return options\n  }\n\n  getFileName(key) {\n    let fileName = this.options.build.filenames[key]\n    if (typeof fileName === 'function') {\n      fileName = fileName(this.nuxtEnv)\n    }\n    if (this.options.dev) {\n      const hash = /\\[(chunkhash|contenthash|hash)(?::(\\d+))?\\]/.exec(fileName)\n      if (hash) {\n        consola.warn(`Notice: Please do not use ${hash[1]} in dev mode to prevent memory leak`)\n      }\n    }\n    return fileName\n  }\n\n  devtool() {\n    return false\n  }\n\n  env() {\n    const env = {\n      'process.mode': JSON.stringify(this.options.mode),\n      'process.static': this.isStatic\n    }\n    Object.entries(this.options.env).forEach(([key, value]) => {\n      env['process.env.' + key] =\n        ['boolean', 'number'].includes(typeof value)\n          ? value\n          : JSON.stringify(value)\n    })\n    return env\n  }\n\n  output() {\n    return {\n      path: path.resolve(this.options.buildDir, 'dist', this.isServer ? 'server' : 'client'),\n      filename: this.getFileName('app'),\n      chunkFilename: this.getFileName('chunk'),\n      publicPath: isUrl(this.options.build.publicPath)\n        ? this.options.build.publicPath\n        : urlJoin(this.options.router.base, this.options.build.publicPath)\n    }\n  }\n\n  optimization() {\n    return this.options.build.optimization\n  }\n\n  alias() {\n    const { srcDir, rootDir, dir: { assets: assetsDir, static: staticDir } } = this.options\n\n    return {\n      '~': path.join(srcDir),\n      '~~': path.join(rootDir),\n      '@': path.join(srcDir),\n      '@@': path.join(rootDir),\n      [assetsDir]: path.join(srcDir, assetsDir),\n      [staticDir]: path.join(srcDir, staticDir)\n    }\n  }\n\n  rules() {\n    const styleLoader = new StyleLoader(\n      this.options,\n      this.builder.nuxt,\n      { isServer: this.isServer }\n    )\n\n    const perfLoader = this.builder.perfLoader\n\n    return [\n      {\n        test: /\\.vue$/,\n        loader: 'vue-loader',\n        options: this.loaders.vue\n      },\n      {\n        test: /\\.pug$/,\n        oneOf: [\n          {\n            resourceQuery: /^\\?vue/,\n            use: [{\n              loader: 'pug-plain-loader',\n              options: this.loaders.pugPlain\n            }]\n          },\n          {\n            use: [\n              'raw-loader',\n              {\n                loader: 'pug-plain-loader',\n                options: this.loaders.pugPlain\n              }\n            ]\n          }\n        ]\n      },\n      {\n        test: /\\.jsx?$/,\n        exclude: (file) => {\n          // not exclude files outside node_modules\n          if (!/node_modules/.test(file)) {\n            return false\n          }\n\n          // item in transpile can be string or regex object\n          const modulesToTranspile = [/\\.vue\\.js/].concat(this.options.build.transpile)\n\n          return !modulesToTranspile.some(module => module.test(file))\n        },\n        use: perfLoader.pool('js', {\n          loader: 'babel-loader',\n          options: this.getBabelOptions()\n        })\n      },\n      {\n        test: /\\.css$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('css'))\n      },\n      {\n        test: /\\.less$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('less', {\n          loader: 'less-loader',\n          options: this.loaders.less\n        }))\n      },\n      {\n        test: /\\.sass$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('sass', {\n          loader: 'sass-loader',\n          options: this.loaders.sass\n        }))\n      },\n      {\n        test: /\\.scss$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('scss', {\n          loader: 'sass-loader',\n          options: this.loaders.scss\n        }))\n      },\n      {\n        test: /\\.styl(us)?$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('stylus', {\n          loader: 'stylus-loader',\n          options: this.loaders.stylus\n        }))\n      },\n      {\n        test: /\\.(png|jpe?g|gif|svg|webp)$/,\n        use: perfLoader.pool('assets', {\n          loader: 'url-loader',\n          options: Object.assign(\n            this.loaders.imgUrl,\n            { name: this.getFileName('img') }\n          )\n        })\n      },\n      {\n        test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\n        use: perfLoader.pool('assets', {\n          loader: 'url-loader',\n          options: Object.assign(\n            this.loaders.fontUrl,\n            { name: this.getFileName('font') }\n          )\n        })\n      },\n      {\n        test: /\\.(webm|mp4|ogv)$/,\n        use: perfLoader.pool('assets', {\n          loader: 'file-loader',\n          options: Object.assign(\n            this.loaders.file,\n            { name: this.getFileName('video') }\n          )\n        })\n      }\n    ]\n  }\n\n  plugins() {\n    const plugins = [ new VueLoader.VueLoaderPlugin() ]\n\n    Array.prototype.push.apply(plugins, this.options.build.plugins || [])\n\n    // Add timefix-plugin before others plugins\n    if (this.options.dev) {\n      plugins.unshift(new TimeFixPlugin())\n    }\n\n    // Hide warnings about plugins without a default export (#1179)\n    plugins.push(new WarnFixPlugin())\n\n    // Build progress indicator\n    plugins.push(new WebpackBar({\n      profile: this.options.build.profile,\n      name: this.isServer ? 'server' : 'client',\n      color: this.isServer ? 'orange' : 'green',\n      compiledIn: false,\n      done: (states) => {\n        if (this.options.dev) {\n          const hasErrors = Object.values(states).some(state => state.stats.hasErrors())\n\n          if (!hasErrors) {\n            this.nuxt.showReady(false)\n          }\n        }\n      }\n    }))\n\n    // Add stats plugin\n    if (!this.options.dev && this.options.build.stats) {\n      plugins.push(new StatsPlugin(this.options.build.stats))\n    }\n\n    // CSS extraction\n    // MiniCssExtractPlugin does not currently supports SSR\n    // https://github.com/webpack-contrib/mini-css-extract-plugin/issues/48\n    // So we use css-loader/locals as a fallback (utils/style-loader)\n    if (this.options.build.extractCSS && !this.isServer) {\n      plugins.push(new MiniCssExtractPlugin(Object.assign({\n        filename: this.getFileName('css'),\n        chunkFilename: this.getFileName('css')\n      }, this.options.build.extractCSS)))\n    }\n\n    return plugins\n  }\n\n  extendConfig(config) {\n    if (typeof this.options.build.extend === 'function') {\n      const extendedConfig = this.options.build.extend.call(\n        this.builder, config, { loaders: this.loaders, ...this.nuxtEnv }\n      )\n      // Only overwrite config when something is returned for backwards compatibility\n      if (extendedConfig !== undefined) {\n        return extendedConfig\n      }\n    }\n    return config\n  }\n\n  config() {\n    // Prioritize nested node_modules in webpack search path (#2558)\n    const webpackModulesDir = ['node_modules'].concat(this.options.modulesDir)\n    const config = {\n      name: this.name,\n      mode: this.options.dev ? 'development' : 'production',\n      devtool: this.devtool(),\n      optimization: this.optimization(),\n      output: this.output(),\n      performance: {\n        maxEntrypointSize: 1000 * 1024,\n        hints: this.options.dev ? false : 'warning'\n      },\n      resolve: {\n        extensions: ['.wasm', '.mjs', '.js', '.json', '.vue', '.jsx'],\n        alias: this.alias(),\n        modules: webpackModulesDir\n      },\n      resolveLoader: {\n        modules: webpackModulesDir\n      },\n      module: {\n        rules: this.rules()\n      },\n      plugins: this.plugins()\n    }\n\n    const extendedConfig = this.extendConfig(config)\n\n    // Clone deep avoid leaking config between Client and Server\n    return _.cloneDeep(extendedConfig)\n  }\n}\n","import path from 'path'\n\nimport webpack from 'webpack'\nimport HTMLPlugin from 'html-webpack-plugin'\nimport BundleAnalyzer from 'webpack-bundle-analyzer'\nimport TerserWebpackPlugin from 'terser-webpack-plugin'\nimport OptimizeCSSAssetsPlugin from 'optimize-css-assets-webpack-plugin'\nimport FriendlyErrorsWebpackPlugin from '@nuxtjs/friendly-errors-webpack-plugin'\n\nimport VueSSRClientPlugin from './plugins/vue/client'\nimport WebpackBaseConfig from './base'\n\nexport default class WebpackClientConfig extends WebpackBaseConfig {\n  constructor(builder) {\n    super(builder, { name: 'client', isServer: false })\n  }\n\n  getFileName(...args) {\n    if (this.options.build.analyze) {\n      const key = args[0]\n      if (['app', 'chunk'].includes(key)) {\n        return '[name].js'\n      }\n    }\n    return super.getFileName(...args)\n  }\n\n  env() {\n    return Object.assign(super.env(), {\n      'process.env.VUE_ENV': JSON.stringify('client'),\n      'process.browser': true,\n      'process.client': true,\n      'process.server': false\n    })\n  }\n\n  optimization() {\n    const optimization = super.optimization()\n\n    // Small, known and common modules which are usually used project-wise\n    // Sum of them may not be more than 244 KiB\n    if (\n      this.options.build.splitChunks.commons === true &&\n      optimization.splitChunks.cacheGroups.commons === undefined\n    ) {\n      optimization.splitChunks.cacheGroups.commons = {\n        test: /node_modules[\\\\/](vue|vue-loader|vue-router|vuex|vue-meta|core-js|@babel\\/runtime|axios|webpack|setimmediate|timers-browserify|process|regenerator-runtime|cookie|js-cookie|is-buffer|dotprop|nuxt\\.js)[\\\\/]/,\n        chunks: 'all',\n        priority: 10,\n        name: true\n      }\n    }\n\n    return optimization\n  }\n\n  plugins() {\n    const plugins = super.plugins()\n\n    // Generate output HTML for SSR\n    if (this.options.build.ssr) {\n      plugins.push(\n        new HTMLPlugin({\n          filename: '../server/index.ssr.html',\n          template: this.options.appTemplatePath,\n          minify: this.options.build.html.minify,\n          inject: false // Resources will be injected using bundleRenderer\n        })\n      )\n    }\n\n    plugins.push(\n      new HTMLPlugin({\n        filename: '../server/index.spa.html',\n        template: this.options.appTemplatePath,\n        minify: this.options.build.html.minify,\n        inject: true,\n        chunksSortMode: 'dependency'\n      }),\n      new VueSSRClientPlugin({\n        filename: '../server/vue-ssr-client-manifest.json'\n      }),\n      new webpack.DefinePlugin(this.env())\n    )\n\n    if (this.options.dev) {\n      // TODO: webpackHotUpdate is not defined: https://github.com/webpack/webpack/issues/6693\n      plugins.push(new webpack.HotModuleReplacementPlugin())\n    }\n\n    // Webpack Bundle Analyzer\n    // https://github.com/webpack-contrib/webpack-bundle-analyzer\n    if (!this.options.dev && this.options.build.analyze) {\n      const statsDir = path.resolve(this.options.buildDir, 'stats')\n\n      plugins.push(new BundleAnalyzer.BundleAnalyzerPlugin(Object.assign({\n        analyzerMode: 'static',\n        defaultSizes: 'gzip',\n        generateStatsFile: true,\n        openAnalyzer: !this.options.build.quiet,\n        reportFilename: path.resolve(statsDir, 'client.html'),\n        statsFilename: path.resolve(statsDir, 'client.json')\n      }, this.options.build.analyze)))\n    }\n\n    return plugins\n  }\n\n  extendConfig() {\n    const config = super.extendConfig(...arguments)\n\n    // Add minimizer plugins\n    if (config.optimization.minimize && config.optimization.minimizer === undefined) {\n      config.optimization.minimizer = []\n\n      // https://github.com/webpack-contrib/terser-webpack-plugin\n      if (this.options.build.terser) {\n        config.optimization.minimizer.push(\n          new TerserWebpackPlugin(Object.assign({\n            parallel: true,\n            cache: this.options.build.cache,\n            sourceMap: config.devtool && /source-?map/.test(config.devtool),\n            extractComments: {\n              filename: 'LICENSES'\n            },\n            terserOptions: {\n              output: {\n                comments: /^\\**!|@preserve|@license|@cc_on/\n              }\n            }\n          }, this.options.build.terser))\n        )\n      }\n\n      // https://github.com/NMFR/optimize-css-assets-webpack-plugin\n      // https://github.com/webpack-contrib/mini-css-extract-plugin#minimizing-for-production\n      // TODO: Remove OptimizeCSSAssetsPlugin when upgrading to webpack 5\n      if (this.options.build.optimizeCSS) {\n        config.optimization.minimizer.push(\n          new OptimizeCSSAssetsPlugin(Object.assign({}, this.options.build.optimizeCSS))\n        )\n      }\n    }\n\n    return config\n  }\n\n  config() {\n    const config = super.config()\n\n    // Entry points\n    config.entry = {\n      app: [path.resolve(this.options.buildDir, 'client.js')]\n    }\n\n    // Add HMR support\n    if (this.options.dev) {\n      config.entry.app.unshift(\n        // https://github.com/glenjamin/webpack-hot-middleware#config\n        `webpack-hot-middleware/client?name=client&reload=true&timeout=30000&path=${\n          this.options.router.base\n        }/__webpack_hmr`.replace(/\\/\\//g, '/')\n      )\n    }\n\n    // Add friendly error plugin\n    if (this.options.dev && !this.options.build.quiet) {\n      config.plugins.push(\n        new FriendlyErrorsWebpackPlugin({\n          clearConsole: true,\n          logLevel: 'WARNING'\n        })\n      )\n    }\n\n    return config\n  }\n}\n","import { validate, isJS, onEmit } from './util'\n\nexport default class VueSSRServerPlugin {\n  constructor(options = {}) {\n    this.options = Object.assign({\n      filename: 'vue-ssr-server-bundle.json'\n    }, options)\n  }\n\n  apply(compiler) {\n    validate(compiler)\n\n    onEmit(compiler, 'vue-server-plugin', (compilation, cb) => {\n      const stats = compilation.getStats().toJson()\n      const entryName = Object.keys(stats.entrypoints)[0]\n      const entryInfo = stats.entrypoints[entryName]\n\n      if (!entryInfo) {\n        // #5553\n        return cb()\n      }\n\n      const entryAssets = entryInfo.assets.filter(isJS)\n\n      if (entryAssets.length > 1) {\n        throw new Error(\n          `Server-side bundle should have one single entry file. ` +\n          `Avoid using CommonsChunkPlugin in the server config.`\n        )\n      }\n\n      const entry = entryAssets[0]\n      if (!entry || typeof entry !== 'string') {\n        throw new Error(\n          `Entry \"${entryName}\" not found. Did you specify the correct entry option?`\n        )\n      }\n\n      const bundle = {\n        entry,\n        files: {},\n        maps: {}\n      }\n\n      stats.assets.forEach((asset) => {\n        if (isJS(asset.name)) {\n          bundle.files[asset.name] = compilation.assets[asset.name].source()\n        } else if (asset.name.match(/\\.js\\.map$/)) {\n          bundle.maps[asset.name.replace(/\\.map$/, '')] = JSON.parse(compilation.assets[asset.name].source())\n        }\n        // do not emit anything else for server\n        delete compilation.assets[asset.name]\n      })\n\n      const json = JSON.stringify(bundle, null, 2)\n      const filename = this.options.filename\n\n      compilation.assets[filename] = {\n        source: () => json,\n        size: () => json.length\n      }\n\n      cb()\n    })\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport webpack from 'webpack'\nimport nodeExternals from 'webpack-node-externals'\n\nimport BaseConfig from './base'\nimport VueSSRServerPlugin from './plugins/vue/server'\n\nexport default class WebpackServerConfig extends BaseConfig {\n  constructor(builder) {\n    super(builder, { name: 'server', isServer: true })\n  }\n\n  devtool() {\n    return 'cheap-module-inline-source-map'\n  }\n\n  env() {\n    return Object.assign(super.env(), {\n      'process.env.VUE_ENV': JSON.stringify('server'),\n      'process.browser': false,\n      'process.client': false,\n      'process.server': true\n    })\n  }\n\n  optimization() {\n    return {\n      splitChunks: false,\n      minimizer: []\n    }\n  }\n\n  plugins() {\n    const plugins = super.plugins()\n    plugins.push(\n      new VueSSRServerPlugin({\n        filename: 'server-bundle.json'\n      }),\n      new webpack.DefinePlugin(this.env())\n    )\n    return plugins\n  }\n\n  config() {\n    const config = super.config()\n\n    Object.assign(config, {\n      target: 'node',\n      node: false,\n      entry: {\n        app: [path.resolve(this.options.buildDir, 'server.js')]\n      },\n      output: Object.assign({}, config.output, {\n        filename: 'server-bundle.js',\n        libraryTarget: 'commonjs2'\n      }),\n      performance: {\n        hints: false,\n        maxAssetSize: Infinity\n      },\n      externals: []\n    })\n\n    // https://webpack.js.org/configuration/externals/#externals\n    // https://github.com/liady/webpack-node-externals\n    // https://vue-loader.vuejs.org/migrating.html#ssr-externals\n    this.options.modulesDir.forEach((dir) => {\n      if (fs.existsSync(dir)) {\n        config.externals.push(\n          nodeExternals({\n            whitelist: [\n              /\\.css$/,\n              /\\?vue&type=style/,\n              ...this.options.build.transpile\n            ],\n            modulesDir: dir\n          })\n        )\n      }\n    })\n\n    return config\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport pify from 'pify'\nimport _ from 'lodash'\nimport chokidar from 'chokidar'\nimport fsExtra from 'fs-extra'\nimport hash from 'hash-sum'\nimport webpack from 'webpack'\nimport serialize from 'serialize-javascript'\nimport devalue from '@nuxtjs/devalue'\nimport MFS from 'memory-fs'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackHotMiddleware from 'webpack-hot-middleware'\nimport Glob from 'glob'\nimport upath from 'upath'\nimport consola from 'consola'\n\nimport {\n  r,\n  wp,\n  wChunk,\n  createRoutes,\n  parallel,\n  sequence,\n  relativeTo,\n  waitFor,\n  determineGlobals\n} from '../common/utils'\n\nimport Options from '../common/options'\nimport PerfLoader from './webpack/utils/perf-loader'\nimport ClientWebpackConfig from './webpack/client'\nimport ServerWebpackConfig from './webpack/server'\n\nconst glob = pify(Glob)\n\nexport default class Builder {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.isStatic = false // Flag to know if the build is for a generated app\n    this.options = nuxt.options\n    this.globals = determineGlobals(nuxt.options.globalName, nuxt.options.globals)\n\n    // Fields that set on build\n    this.compilers = []\n    this.compilersWatching = []\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n    this.watchers = {\n      files: null,\n      custom: null,\n      restart: null\n    }\n    this.perfLoader = null\n\n    // Helper to resolve build paths\n    this.relativeToBuild = (...args) =>\n      relativeTo(this.options.buildDir, ...args)\n\n    this._buildStatus = STATUS.INITIAL\n\n    // Stop watching on nuxt.close()\n    if (this.options.dev) {\n      this.nuxt.hook('close', () => this.unwatch())\n    }\n\n    // Initialize shared FS and Cache\n    if (this.options.dev) {\n      this.mfs = new MFS()\n    }\n\n    if (this.options.build.analyze) {\n      this.nuxt.hook('build:done', () => {\n        consola.warn({\n          message: 'Notice: Please do not deploy bundles built with analyze mode, it\\'s only for analyzing purpose.',\n          badge: true\n        })\n      })\n    }\n\n    // if(!this.options.dev) {\n    // TODO: enable again when unsafe concern resolved.(common/options.js:42)\n    // this.nuxt.hook('build:done', () => this.generateConfig())\n    // }\n  }\n\n  normalizePlugins() {\n    return _.uniqBy(\n      this.options.plugins.map((p) => {\n        if (typeof p === 'string') p = { src: p }\n        const pluginBaseName = path.basename(p.src, path.extname(p.src)).replace(\n          /[^a-zA-Z?\\d\\s:]/g,\n          ''\n        )\n        return {\n          src: this.nuxt.resolveAlias(p.src),\n          ssr: p.ssr !== false,\n          name: 'nuxt_plugin_' + pluginBaseName + '_' + hash(p.src)\n        }\n      }),\n      p => p.name\n    )\n  }\n\n  forGenerate() {\n    this.isStatic = true\n  }\n\n  async build() {\n    // Avoid calling build() method multiple times when dev:true\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILD_DONE && this.options.dev) {\n      return this\n    }\n    // If building\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILDING) {\n      await waitFor(1000)\n      return this.build()\n    }\n    this._buildStatus = STATUS.BUILDING\n\n    consola.info({\n      message: 'Building project',\n      badge: true,\n      clear: !this.options.dev\n    })\n\n    // Wait for nuxt ready\n    await this.nuxt.ready()\n\n    // Call before hook\n    await this.nuxt.callHook('build:before', this, this.options.build)\n\n    // Check if pages dir exists and warn if not\n    this._nuxtPages = typeof this.options.build.createRoutes !== 'function'\n    if (this._nuxtPages) {\n      if (!fsExtra.existsSync(path.join(this.options.srcDir, this.options.dir.pages))) {\n        const dir = this.options.srcDir\n        if (fsExtra.existsSync(path.join(this.options.srcDir, '..', this.options.dir.pages))) {\n          throw new Error(\n            `No \\`${this.options.dir.pages}\\` directory found in ${dir}. Did you mean to run \\`nuxt\\` in the parent (\\`../\\`) directory?`\n          )\n        } else {\n          this._defaultPage = true\n          consola.warn({\n            message: `No \\`${this.options.dir.pages}\\` directory found in ${dir}.`,\n            additional: 'Using the default built-in page.\\n',\n            additionalStyle: 'yellowBright',\n            badge: true\n          })\n        }\n      }\n    }\n\n    consola.success('Builder initialized')\n\n    consola.debug(`App root: ${this.options.srcDir}`)\n\n    // Create .nuxt/, .nuxt/components and .nuxt/dist folders\n    await fsExtra.remove(r(this.options.buildDir))\n    const buildDirs = [r(this.options.buildDir, 'components')]\n    if (!this.options.dev) {\n      buildDirs.push(\n        r(this.options.buildDir, 'dist', 'client'),\n        r(this.options.buildDir, 'dist', 'server')\n      )\n    }\n    await Promise.all(buildDirs.map(dir => fsExtra.mkdirp(dir)))\n\n    // Generate routes and interpret the template files\n    await this.generateRoutesAndFiles()\n\n    // Start webpack build\n    await this.webpackBuild()\n\n    // Flag to set that building is done\n    this._buildStatus = STATUS.BUILD_DONE\n\n    // Call done hook\n    await this.nuxt.callHook('build:done', this)\n\n    return this\n  }\n\n  async generateRoutesAndFiles() {\n    consola.debug(`Generating nuxt files`)\n\n    this.plugins = this.normalizePlugins()\n\n    // -- Templates --\n    let templatesFiles = [\n      'App.js',\n      'client.js',\n      'index.js',\n      'middleware.js',\n      'router.js',\n      'server.js',\n      'utils.js',\n      'empty.js',\n      'components/nuxt-error.vue',\n      'components/nuxt-loading.vue',\n      'components/nuxt-child.js',\n      'components/nuxt-link.js',\n      'components/nuxt.js',\n      'components/no-ssr.js',\n      'views/app.template.html',\n      'views/error.html'\n    ]\n    const templateVars = {\n      options: this.options,\n      extensions: this.options.extensions\n        .map(ext => ext.replace(/^\\./, ''))\n        .join('|'),\n      messages: this.options.messages,\n      splitChunks: this.options.build.splitChunks,\n      uniqBy: _.uniqBy,\n      isDev: this.options.dev,\n      debug: this.options.debug,\n      vue: { config: this.options.vue.config },\n      mode: this.options.mode,\n      router: this.options.router,\n      env: this.options.env,\n      head: this.options.head,\n      middleware: fsExtra.existsSync(path.join(this.options.srcDir, this.options.dir.middleware)),\n      store: this.options.store,\n      globalName: this.options.globalName,\n      globals: this.globals,\n      css: this.options.css,\n      plugins: this.plugins,\n      appPath: './App.js',\n      ignorePrefix: this.options.ignorePrefix,\n      layouts: Object.assign({}, this.options.layouts),\n      loading:\n        typeof this.options.loading === 'string'\n          ? this.relativeToBuild(this.options.srcDir, this.options.loading)\n          : this.options.loading,\n      transition: this.options.transition,\n      layoutTransition: this.options.layoutTransition,\n      dir: this.options.dir,\n      components: {\n        ErrorPage: this.options.ErrorPage\n          ? this.relativeToBuild(this.options.ErrorPage)\n          : null\n      }\n    }\n\n    // -- Layouts --\n    if (fsExtra.existsSync(path.resolve(this.options.srcDir, this.options.dir.layouts))) {\n      const layoutsFiles = await glob(`${this.options.dir.layouts}/**/*.{vue,js}`, {\n        cwd: this.options.srcDir,\n        ignore: this.options.ignore\n      })\n      layoutsFiles.forEach((file) => {\n        const name = file\n          .split('/')\n          .slice(1)\n          .join('/')\n          .replace(/\\.(vue|js)$/, '')\n        if (name === 'error') {\n          if (!templateVars.components.ErrorPage) {\n            templateVars.components.ErrorPage = this.relativeToBuild(\n              this.options.srcDir,\n              file\n            )\n          }\n          return\n        }\n        if (!templateVars.layouts[name] || /\\.vue$/.test(file)) {\n          templateVars.layouts[name] = this.relativeToBuild(\n            this.options.srcDir,\n            file\n          )\n        }\n      })\n    }\n    // If no default layout, create its folder and add the default folder\n    if (!templateVars.layouts.default) {\n      await fsExtra.mkdirp(r(this.options.buildDir, 'layouts'))\n      templatesFiles.push('layouts/default.vue')\n      templateVars.layouts.default = './layouts/default.vue'\n    }\n\n    // -- Routes --\n    consola.debug('Generating routes...')\n\n    if (this._defaultPage) {\n      templateVars.router.routes = createRoutes(\n        ['index.vue'],\n        this.options.nuxtAppDir + '/pages'\n      )\n    } else if (this._nuxtPages) { // If user defined a custom method to create routes\n      // Use nuxt.js createRoutes bases on pages/\n      const files = {}\n      ;(await glob(`${this.options.dir.pages}/**/*.{vue,js}`, {\n        cwd: this.options.srcDir,\n        ignore: this.options.ignore\n      })).forEach((f) => {\n        const key = f.replace(/\\.(js|vue)$/, '')\n        if (/\\.vue$/.test(f) || !files[key]) {\n          files[key] = f.replace(/('|\")/g, '\\\\$1')\n        }\n      })\n      templateVars.router.routes = createRoutes(\n        Object.values(files),\n        this.options.srcDir,\n        this.options.dir.pages\n      )\n    } else {\n      templateVars.router.routes = this.options.build.createRoutes(\n        this.options.srcDir\n      )\n    }\n\n    await this.nuxt.callHook(\n      'build:extendRoutes',\n      templateVars.router.routes,\n      r\n    )\n    // router.extendRoutes method\n    if (typeof this.options.router.extendRoutes === 'function') {\n      // let the user extend the routes\n      const extendedRoutes = this.options.router.extendRoutes(\n        templateVars.router.routes,\n        r\n      )\n      // Only overwrite routes when something is returned for backwards compatibility\n      if (extendedRoutes !== undefined) {\n        templateVars.router.routes = extendedRoutes\n      }\n    }\n\n    // Make routes accessible for other modules and webpack configs\n    this.routes = templateVars.router.routes\n\n    // -- Store --\n    // Add store if needed\n    if (this.options.store) {\n      templatesFiles.push('store.js')\n    }\n\n    // Resolve template files\n    const customTemplateFiles = this.options.build.templates.map(\n      t => t.dst || path.basename(t.src || t)\n    )\n\n    templatesFiles = templatesFiles\n      .map((file) => {\n        // Skip if custom file was already provided in build.templates[]\n        if (customTemplateFiles.includes(file)) {\n          return\n        }\n        // Allow override templates using a file with same name in ${srcDir}/app\n        const customPath = r(this.options.srcDir, 'app', file)\n        const customFileExists = fsExtra.existsSync(customPath)\n\n        return {\n          src: customFileExists ? customPath : r(this.options.nuxtAppDir, file),\n          dst: file,\n          custom: customFileExists\n        }\n      })\n      .filter(i => !!i)\n\n    // -- Custom templates --\n    // Add custom template files\n    templatesFiles = templatesFiles.concat(\n      this.options.build.templates.map((t) => {\n        return Object.assign(\n          {\n            src: r(this.options.srcDir, t.src || t),\n            dst: t.dst || path.basename(t.src || t),\n            custom: true\n          },\n          t\n        )\n      })\n    )\n\n    // -- Loading indicator --\n    if (this.options.loadingIndicator.name) {\n      const indicatorPath1 = path.resolve(\n        this.options.nuxtAppDir,\n        'views/loading',\n        this.options.loadingIndicator.name + '.html'\n      )\n      const indicatorPath2 = this.nuxt.resolveAlias(\n        this.options.loadingIndicator.name\n      )\n      const indicatorPath = fsExtra.existsSync(indicatorPath1)\n        ? indicatorPath1\n        : fsExtra.existsSync(indicatorPath2) ? indicatorPath2 : null\n      if (indicatorPath) {\n        templatesFiles.push({\n          src: indicatorPath,\n          dst: 'loading.html',\n          options: this.options.loadingIndicator\n        })\n      } else {\n        /* istanbul ignore next */\n        // eslint-disable-next-line no-console\n        console.error(\n          `Could not fetch loading indicator: ${\n            this.options.loadingIndicator.name\n          }`\n        )\n      }\n    }\n\n    await this.nuxt.callHook('build:templates', {\n      templatesFiles,\n      templateVars,\n      resolve: r\n    })\n\n    // Interpret and move template files to .nuxt/\n    await Promise.all(\n      templatesFiles.map(async ({ src, dst, options, custom }) => {\n        // Add template to watchers\n        this.options.build.watch.push(src)\n        // Render template to dst\n        const fileContent = await fsExtra.readFile(src, 'utf8')\n        let content\n        try {\n          const template = _.template(fileContent, {\n            imports: {\n              serialize,\n              devalue,\n              hash,\n              r,\n              wp,\n              wChunk,\n              resolvePath: this.nuxt.resolvePath,\n              resolveAlias: this.nuxt.resolveAlias,\n              relativeToBuild: this.relativeToBuild\n            },\n            interpolate: /<%=([\\s\\S]+?)%>/g\n          })\n          content = template(\n            Object.assign({}, templateVars, {\n              options: options || {},\n              custom,\n              src,\n              dst\n            })\n          )\n        } catch (err) {\n          /* istanbul ignore next */\n          throw new Error(`Could not compile template ${src}: ${err.message}`)\n        }\n        const _path = r(this.options.buildDir, dst)\n        // Ensure parent dir exits and write file\n        await fsExtra.outputFile(_path, content, 'utf8')\n      })\n    )\n\n    consola.success('Nuxt files generated')\n  }\n\n  async webpackBuild() {\n    this.perfLoader = new PerfLoader(this.options)\n\n    const compilersOptions = []\n\n    // Client\n    const clientConfig = new ClientWebpackConfig(this).config()\n    compilersOptions.push(clientConfig)\n\n    // Server\n    let serverConfig = null\n    if (this.options.build.ssr) {\n      serverConfig = new ServerWebpackConfig(this).config()\n      compilersOptions.push(serverConfig)\n    }\n\n    // Check plugins exist then set alias to their real path\n    await Promise.all(this.plugins.map(async (p) => {\n      const ext = path.extname(p.src) ? '' : '{.+([^.]),/index.+([^.])}'\n      const pluginFiles = await glob(`${p.src}${ext}`)\n\n      if (!pluginFiles || pluginFiles.length === 0) {\n        throw new Error(`Plugin not found: ${p.src}`)\n      } else if (pluginFiles.length > 1) {\n        consola.warn({\n          message: `Found ${pluginFiles.length} plugins that match the configuration, suggest to specify extension:`,\n          additional: `  ${pluginFiles.join('\\n  ')}`,\n          badge: true\n        })\n      }\n\n      const src = this.relativeToBuild(p.src)\n      // Client config\n      if (!clientConfig.resolve.alias[p.name]) {\n        clientConfig.resolve.alias[p.name] = src\n      }\n\n      // Server config\n      if (serverConfig && !serverConfig.resolve.alias[p.name]) {\n        // Alias to noop for ssr:false plugins\n        serverConfig.resolve.alias[p.name] = p.ssr ? src : './empty.js'\n      }\n    }))\n\n    // Configure compilers\n    this.compilers = compilersOptions.map((compilersOption) => {\n      const compiler = webpack(compilersOption)\n\n      // In dev, write files in memory FS\n      if (this.options.dev) {\n        compiler.outputFileSystem = this.mfs\n      }\n\n      return compiler\n    })\n\n    // Warmup perfLoader before build\n    if (this.options.build.parallel) {\n      consola.info('Warming up worker pools')\n      this.perfLoader.warmupAll()\n      consola.success('Worker pools ready')\n    }\n\n    // Start Builds\n    const runner = this.options.dev ? parallel : sequence\n\n    await runner(this.compilers, (compiler) => {\n      return this.webpackCompile(compiler)\n    })\n  }\n\n  webpackCompile(compiler) {\n    return new Promise(async (resolve, reject) => {\n      const name = compiler.options.name\n\n      await this.nuxt.callHook('build:compile', { name, compiler })\n\n      // Load renderer resources after build\n      compiler.hooks.done.tap('load-resources', async (stats) => {\n        await this.nuxt.callHook('build:compiled', {\n          name,\n          compiler,\n          stats\n        })\n\n        // Reload renderer if available\n        this.nuxt.renderer.loadResources(this.mfs || fs)\n\n        // Resolve on next tick\n        process.nextTick(resolve)\n      })\n\n      if (this.options.dev) {\n        // --- Dev Build ---\n        // Client Build, watch is started by dev-middleware\n        if (compiler.options.name === 'client') {\n          return this.webpackDev(compiler)\n        }\n        // Server, build and watch for changes\n        this.compilersWatching.push(\n          compiler.watch(this.options.watchers.webpack, (err) => {\n            /* istanbul ignore if */\n            if (err) return reject(err)\n          })\n        )\n      } else {\n        // --- Production Build ---\n        compiler.run((err, stats) => {\n          /* istanbul ignore next */\n          if (err) {\n            return reject(err)\n          } else if (stats.hasErrors()) {\n            if (this.options.build.quiet === true) {\n              err = stats.toString(this.options.build.stats)\n            }\n            if (!err) {\n              // actual errors will be printed by webpack itself\n              err = 'Nuxt Build Error'\n            }\n\n            return reject(err)\n          }\n\n          resolve()\n        })\n      }\n    })\n  }\n\n  webpackDev(compiler) {\n    consola.debug('Adding webpack middleware...')\n\n    // Create webpack dev middleware\n    this.webpackDevMiddleware = pify(\n      webpackDevMiddleware(\n        compiler,\n        Object.assign(\n          {\n            publicPath: this.options.build.publicPath,\n            stats: false,\n            logLevel: 'silent',\n            watchOptions: this.options.watchers.webpack\n          },\n          this.options.build.devMiddleware\n        )\n      )\n    )\n\n    this.webpackDevMiddleware.close = pify(this.webpackDevMiddleware.close)\n\n    this.webpackHotMiddleware = pify(\n      webpackHotMiddleware(\n        compiler,\n        Object.assign(\n          {\n            log: false,\n            heartbeat: 10000\n          },\n          this.options.build.hotMiddleware\n        )\n      )\n    )\n\n    // Inject to renderer instance\n    if (this.nuxt.renderer) {\n      this.nuxt.renderer.webpackDevMiddleware = this.webpackDevMiddleware\n      this.nuxt.renderer.webpackHotMiddleware = this.webpackHotMiddleware\n    }\n\n    // Start watching client files\n    this.watchClient()\n  }\n\n  watchClient() {\n    const src = this.options.srcDir\n    let patterns = [\n      r(src, this.options.dir.layouts),\n      r(src, this.options.dir.store),\n      r(src, this.options.dir.middleware),\n      r(src, `${this.options.dir.layouts}/*.{vue,js}`),\n      r(src, `${this.options.dir.layouts}/**/*.{vue,js}`)\n    ]\n    if (this._nuxtPages) {\n      patterns.push(\n        r(src, this.options.dir.pages),\n        r(src, `${this.options.dir.pages}/*.{vue,js}`),\n        r(src, `${this.options.dir.pages}/**/*.{vue,js}`)\n      )\n    }\n    patterns = _.map(patterns, upath.normalizeSafe)\n\n    const options = this.options.watchers.chokidar\n    /* istanbul ignore next */\n    const refreshFiles = _.debounce(() => this.generateRoutesAndFiles(), 200)\n\n    // Watch for src Files\n    this.watchers.files = chokidar\n      .watch(patterns, options)\n      .on('add', refreshFiles)\n      .on('unlink', refreshFiles)\n\n    // Watch for custom provided files\n    let customPatterns = _.concat(\n      this.options.build.watch,\n      ..._.values(_.omit(this.options.build.styleResources, ['options']))\n    )\n    customPatterns = _.map(_.uniq(customPatterns), upath.normalizeSafe)\n    this.watchers.custom = chokidar\n      .watch(customPatterns, options)\n      .on('change', refreshFiles)\n  }\n\n  watchServer() {\n    const nuxtRestartWatch = _.concat(\n      this.options.serverMiddleware\n        .filter(i => typeof i === 'string')\n        .map(this.nuxt.resolveAlias),\n      this.options.watch.map(this.nuxt.resolveAlias),\n      path.join(this.options.rootDir, 'nuxt.config.js')\n    )\n\n    this.watchers.restart = chokidar\n      .watch(nuxtRestartWatch, this.options.watchers.chokidar)\n      .on('change', (_path) => {\n        this.watchers.restart.close()\n        const { name, ext } = path.parse(_path)\n        this.nuxt.callHook('watch:fileChanged', this, `${name}${ext}`)\n      })\n  }\n\n  async unwatch() {\n    for (const watcher in this.watchers) {\n      if (this.watchers[watcher]) {\n        this.watchers[watcher].close()\n      }\n    }\n\n    this.compilersWatching.forEach(watching => watching.close())\n\n    // Stop webpack middleware\n    if (this.webpackDevMiddleware) {\n      await this.webpackDevMiddleware.close()\n    }\n  }\n\n  // TODO: remove ignore when generateConfig enabled again\n  async generateConfig() /* istanbul ignore next */ {\n    const config = path.resolve(this.options.buildDir, 'build.config.js')\n    const options = _.omit(this.options, Options.unsafeKeys)\n    await fsExtra.writeFile(\n      config,\n      `export default ${JSON.stringify(options, null, '  ')}`,\n      'utf8'\n    )\n  }\n}\n\nconst STATUS = {\n  INITIAL: 1,\n  BUILD_DONE: 2,\n  BUILDING: 3\n}\n","import path from 'path'\nimport htmlMinifier from 'html-minifier'\nimport Chalk from 'chalk'\nimport fsExtra from 'fs-extra'\nimport consola from 'consola'\nimport { flatRoutes, isUrl, promisifyRoute, waitFor, isString } from '../common/utils'\n\nexport default class Generator {\n  constructor(nuxt, builder) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.builder = builder\n\n    // Set variables\n    this.staticRoutes = path.resolve(this.options.srcDir, this.options.dir.static)\n    this.srcBuiltPath = path.resolve(this.options.buildDir, 'dist', 'client')\n    this.distPath = this.options.generate.dir\n    this.distNuxtPath = path.join(\n      this.distPath,\n      isUrl(this.options.build.publicPath) ? '' : this.options.build.publicPath\n    )\n  }\n\n  async generate({ build = true, init = true } = {}) {\n    consola.debug('Initializing generator...')\n\n    await this.initiate({ build, init })\n\n    consola.debug('Preparing routes for generate...')\n\n    const routes = await this.initRoutes()\n\n    consola.info({\n      message: 'Generating pages',\n      badge: true,\n      clear: true\n    })\n\n    const errors = await this.generateRoutes(routes)\n\n    await this.afterGenerate()\n\n    // Done hook\n    await this.nuxt.callHook('generate:done', this, errors)\n\n    return { errors }\n  }\n\n  async initiate({ build = true, init = true } = {}) {\n    // Wait for nuxt be ready\n    await this.nuxt.ready()\n\n    // Call before hook\n    await this.nuxt.callHook('generate:before', this, this.options.generate)\n\n    if (build) {\n      // Add flag to set process.static\n      this.builder.forGenerate()\n\n      // Start build process\n      await this.builder.build()\n    }\n\n    // Initialize dist directory\n    if (init) {\n      await this.initDist()\n    }\n  }\n\n  async initRoutes(...args) {\n    // Resolve config.generate.routes promises before generating the routes\n    let generateRoutes = []\n    if (this.options.router.mode !== 'hash') {\n      try {\n        generateRoutes = await promisifyRoute(\n          this.options.generate.routes || [],\n          ...args\n        )\n      } catch (e) {\n        consola.error('Could not resolve routes')\n        throw e // eslint-disable-line no-unreachable\n      }\n    }\n    // Generate only index.html for router.mode = 'hash'\n    let routes =\n      this.options.router.mode === 'hash'\n        ? ['/']\n        : flatRoutes(this.options.router.routes)\n    routes = this.decorateWithPayloads(routes, generateRoutes)\n\n    // extendRoutes hook\n    await this.nuxt.callHook('generate:extendRoutes', routes)\n\n    return routes\n  }\n\n  async generateRoutes(routes) {\n    const errors = []\n\n    // Start generate process\n    while (routes.length) {\n      let n = 0\n      await Promise.all(\n        routes\n          .splice(0, this.options.generate.concurrency)\n          .map(async ({ route, payload }) => {\n            await waitFor(n++ * this.options.generate.interval)\n            await this.generateRoute({ route, payload, errors })\n          })\n      )\n    }\n\n    // Improve string representation for errors\n    errors.toString = () => this._formatErrors(errors)\n\n    return errors\n  }\n\n  _formatErrors(errors) {\n    return errors\n      .map(({ type, route, error }) => {\n        const isHandled = type === 'handled'\n        const bgColor = isHandled ? 'bgYellow' : 'bgRed'\n        const color = isHandled ? 'yellow' : 'red'\n\n        let line =\n          Chalk.black[bgColor](' GEN ERR ') + Chalk[color](` ${route}\\n\\n`)\n\n        if (isHandled) {\n          line += Chalk.grey(JSON.stringify(error, undefined, 2) + '\\n')\n        } else {\n          line += Chalk.grey(error.stack)\n        }\n\n        return line\n      })\n      .join('\\n')\n  }\n\n  async afterGenerate() {\n    const { fallback } = this.options.generate\n\n    // Disable SPA fallback if value isn't a non-empty string\n    if (typeof fallback !== 'string' || !fallback) return\n\n    const fallbackPath = path.join(this.distPath, fallback)\n\n    // Prevent conflicts\n    if (fsExtra.existsSync(fallbackPath)) {\n      consola.warn(`SPA fallback was configured, but the configured path (${fallbackPath}) already exists.`)\n      return\n    }\n\n    // Render and write the SPA template to the fallback path\n    const { html } = await this.nuxt.renderRoute('/', { spa: true })\n    await fsExtra.writeFile(fallbackPath, html, 'utf8')\n  }\n\n  async initDist() {\n    // Clean destination folder\n    await fsExtra.remove(this.distPath)\n\n    await this.nuxt.callHook('generate:distRemoved', this)\n\n    // Copy static and built files\n    /* istanbul ignore if */\n    if (fsExtra.existsSync(this.staticRoutes)) {\n      await fsExtra.copy(this.staticRoutes, this.distPath)\n    }\n    await fsExtra.copy(this.srcBuiltPath, this.distNuxtPath)\n\n    // Add .nojekyll file to let GitHub Pages add the _nuxt/ folder\n    // https://help.github.com/articles/files-that-start-with-an-underscore-are-missing/\n    const nojekyllPath = path.resolve(this.distPath, '.nojekyll')\n    fsExtra.writeFile(nojekyllPath, '')\n\n    await this.nuxt.callHook('generate:distCopied', this)\n  }\n\n  decorateWithPayloads(routes, generateRoutes) {\n    const routeMap = {}\n    // Fill routeMap for known routes\n    routes.forEach((route) => {\n      routeMap[route] = { route, payload: null }\n    })\n    // Fill routeMap with given generate.routes\n    generateRoutes.forEach((route) => {\n      // route is either a string or like { route : '/my_route/1', payload: {} }\n      const path = isString(route) ? route : route.route\n      routeMap[path] = {\n        route: path,\n        payload: route.payload || null\n      }\n    })\n    return Object.values(routeMap)\n  }\n\n  async generateRoute({ route, payload = {}, errors = [] }) {\n    let html\n    const pageErrors = []\n\n    try {\n      const res = await this.nuxt.renderer.renderRoute(route, {\n        _generate: true,\n        payload\n      })\n      html = res.html\n      if (res.error) {\n        pageErrors.push({ type: 'handled', route, error: res.error })\n      }\n    } catch (err) {\n      /* istanbul ignore next */\n      pageErrors.push({ type: 'unhandled', route, error: err })\n      Array.prototype.push.apply(errors, pageErrors)\n\n      await this.nuxt.callHook('generate:routeFailed', {\n        route,\n        errors: pageErrors\n      })\n      consola.error(this._formatErrors(pageErrors))\n\n      return false\n    }\n\n    let minificationOptions = this.options.build.html.minify\n\n    // Legacy: Override minification options with generate.minify if present\n    // TODO: Remove in Nuxt version 3\n    if (typeof this.options.generate.minify !== 'undefined') {\n      minificationOptions = this.options.generate.minify\n      consola.warn('generate.minify has been deprecated and will be removed in the next major version.' +\n        ' Use build.html.minify instead!')\n    }\n\n    if (minificationOptions) {\n      try {\n        html = htmlMinifier.minify(html, minificationOptions)\n      } catch (err) /* istanbul ignore next */ {\n        const minifyErr = new Error(\n          `HTML minification failed. Make sure the route generates valid HTML. Failed HTML:\\n ${html}`\n        )\n        pageErrors.push({ type: 'unhandled', route, error: minifyErr })\n      }\n    }\n\n    let _path\n\n    if (this.options.generate.subFolders) {\n      _path = path.join(route, path.sep, 'index.html') // /about -> /about/index.html\n      _path = _path === '/404/index.html' ? '/404.html' : _path // /404 -> /404.html\n    } else {\n      _path = route.length > 1 ? path.join(path.sep, route + '.html') : path.join(path.sep, 'index.html')\n    }\n\n    // Call hook to let user update the path & html\n    const page = { route, path: _path, html }\n    await this.nuxt.callHook('generate:page', page)\n\n    page.path = path.join(this.distPath, page.path)\n\n    // Make sure the sub folders are created\n    await fsExtra.mkdirp(path.dirname(page.path))\n    await fsExtra.writeFile(page.path, page.html, 'utf8')\n\n    await this.nuxt.callHook('generate:routeCreated', {\n      route,\n      path: page.path,\n      errors: pageErrors\n    })\n\n    if (pageErrors.length) {\n      consola.error('Error generating ' + route)\n      Array.prototype.push.apply(errors, pageErrors)\n    } else {\n      consola.success('Generated ' + route)\n    }\n\n    return true\n  }\n}\n","import Builder from './builder'\nimport Generator from './generator'\n\nexport default {\n  Builder,\n  Generator\n}\n","import '@babel/polyfill'\n\nimport consola from 'consola'\n\nimport core from '../../../lib/core'\nimport builder from '../../../lib/builder'\nimport * as Utils from '../../../lib/common/utils'\n\nconsola.warn('You are using legacy build of Nuxt. Please consider upgrading your Node.js version to 8.x or later.')\n\nexport default Object.assign({ Utils }, core, builder)\n"],"names":["encodeHtml","str","replace","getContext","req","res","waitFor","ms","Promise","resolve","setTimeout","isString","obj","String","startsWithAlias","aliasArray","some","c","startsWith","startsWithSrcAlias","startsWithRootAlias","promiseFinally","fn","finalFn","result","timeout","msg","timerId","warpPromise","clearTimeout","timerPromise","reject","Error","race","urlJoin","slice","call","arguments","join","isUrl","url","promisifyRoute","args","Array","isArray","length","err","routeParams","promise","then","sequence","tasks","reduce","task","parallel","all","map","chainFn","base","apply","baseResult","undefined","fnResult","prototype","isPureObject","o","isWindows","test","process","platform","wp","p","wChunk","reqSep","sysSep","_","escapeRegExp","path","sep","normalize","string","r","lastArg","relativeTo","dir","shift","includes","loaders","split","concat","pop","_path","rp","relative","flatRoutes","router","routes","forEach","children","push","cleanChildrenRoutes","isChild","start","routesIndex","route","name","s","indexOf","names","paths","i","a","find","child","createRoutes","files","srcDir","pagesDir","file","keys","RegExp","component","parent","key","sanitizedKey","substr","chunkName","parentRoute","getRoutePathExtension","sort","b","DYNAMIC_ROUTE_REGEX","y","z","_a","_b","guardDir","options","key1","key2","dir1","get","dir2","basename","errorMessage","consola","fatal","determineGlobals","globalName","globals","_globals","global","wrapArray","value","ModuleContainer","nuxt","requiredModules","callHook","modules","addModule","bind","warn","template","JSON","stringify","src","srcPath","parse","fs","existsSync","dst","fileName","hash","ext","templateObj","build","templates","addTemplate","plugins","unshift","buildDir","ssr","layouts","addErrorLayout","relativeBuildDir","rootDir","ErrorPage","middleware","serverMiddleware","extend","extendRoutes","moduleOpts","requireOnce","handler","requireModule","meta","universal","render","spa","nuxtDir","__dirname","dev","Boolean","env","debug","mode","id","context","toUpperCase","pluginPrefix","readyCallback","capitalize","loadedCallback","server","https","port","NUXT_PORT","PORT","npm_package_config_nuxt_port","host","NUXT_HOST","HOST","npm_package_config_nuxt_host","nuxtAppDir","modulesDir","ignorePrefix","ignore","extensions","quiet","ci","analyze","profile","argv","extractCSS","cssSourceMap","cache","publicPath","filenames","app","isDev","chunk","css","img","font","video","fontUrl","limit","imgUrl","pugPlain","vue","transformAssetUrls","source","object","embed","cssModules","localIdentName","less","sass","indentedSyntax","scss","stylus","vueStyle","styleResources","terser","optimizeCSS","optimization","runtimeChunk","minimize","minimizer","splitChunks","chunks","automaticNameDelimiter","cacheGroups","pages","commons","babel","babelrc","cacheDirectory","transpile","postcss","preset","stage","html","minify","collapseBooleanAttributes","decodeEntities","minifyCSS","minifyJS","processConditionalComments","removeEmptyAttributes","removeRedundantAttributes","trimCustomFragments","useShortDoctype","watch","devMiddleware","hotMiddleware","stats","colors","warnings","errors","excludeAssets","generate","concurrency","interval","subFolders","fallback","head","link","style","script","loading","color","failedColor","height","throttle","duration","rtl","loadingIndicator","transition","appear","appearClass","appearActiveClass","appearToClass","layoutTransition","assets","static","store","config","silent","performance","linkActiveClass","linkExactActiveClass","scrollBehavior","parseQuery","stringifyQuery","bundleRenderer","shouldPrefetch","resourceHints","http2","shouldPush","prefix","compressor","threshold","etag","weak","csp","dist","index","maxAge","watchers","webpack","chokidar","ignoreInitial","editor","hooks","messages","error_404","server_error","nuxtjs","back_to_home","server_error_details","client_error","client_error_details","hasValue","v","Options","from","_options","Object","assign","_routerBaseSpecified","toLowerCase","cwd","defaultsDeep","defaults","hasSrcDir","hasGenerateDir","filter","mandatoryExtensions","appTemplatePath","readdirSync","filename","color2","background","manifest","theme_color","cspDefaults","hashAlgorithm","allowedSources","policies","reportOnly","isObject","vueConfig","eligibleEnvVariables","pick","k","gzip","modePreset","modes","vendor","vueLoader","productionMode","styleLoaders","loader","sourceMap","module","level","MetaRenderer","renderer","vueRenderer","createRenderer","LRU","Vue","use","VueMeta","keyName","attribute","ssrAttribute","tagIDKeyName","vm","h","renderToString","$meta","inject","HTML_ATTRS","BODY_ATTRS","HEAD","BODY_SCRIPTS","getMeta","m","htmlAttrs","text","bodyAttrs","title","noscript","body","clientManifest","resources","shouldPreload","initial","async","getPreloadFiles","fileWithoutQuery","asType","extension","set","errorMiddleware","next","statusCode","message","error","sendResponse","content","type","statusMessage","setHeader","Buffer","byteLength","end","hasReqHeader","header","headers","isJson","json","status","errorTemplate","youch","Youch","readSource","toJSON","toHTML","frame","sanitizeName","searchPath","pathDir","fullPath","readFile","catch","contents","isAbsolute","serverBundle","nuxtMiddleware","renderRoute","cspScriptSrcHashSet","redirected","generateETag","fresh","pushAssets","preloadFiles","cspHeader","getCspString","joinedHashSet","baseCspStr","policyObjectAvailable","transformedPolicyObject","transformPolicyObject","entries","userHasDefinedScriptSrc","hashAndPolicySet","add","Set","jsdom","Renderer","metaRenderer","webpackDevMiddleware","webpackHotMiddleware","connect","ssrTemplate","spaTemplate","parseTemplate","setupMiddleware","loadResources","_fs","distPath","updated","resourceMap","transform","rawKey","rawData","readFileSync","data","errorTemplatePath","loadingHTMLPath","loadingHTML","isResourcesAvailable","noSSR","hasModules","createBundleRenderer","runInNewContext","basedir","$m","compression","require","useMiddleware","launchMiddleware","staticMiddleware","serveStatic","distDir","opts","html_attrs","body_attrs","isReady","ENV","APP","renderTemplate","serverRendered","renderResourceHints","serializedSession","devalue","crypto","createHash","update","digest","renderScripts","renderStyles","runScripts","virtualConsole","beforeParse","window","scrollTo","jsdomErrHandler","VirtualConsole","sendTo","on","JSDOM","fromURL","nuxtExists","document","innerHTML","onNuxtLoaded","removeListener","templateStr","interpolate","Nuxt","readyMessage","initialized","_hooks","hook","moduleContainer","renderAndGetWindow","resolvePath","resolveAlias","esm","_ready","ready","isPlainObject","addHooks","configHooks","parentName","subHook","flatHooks","clear","badge","socket","exclusive","appServer","isHttps","httpsOptions","createServer","listen","listenURL","address","ip","chalk","underline","blue","listening","destroy","enableDestroy","resolvedPath","Module","_resolveFilename","code","modulePath","resolveModule","_resolvedPath","default","callback","packageJSON","version","PerfLoader","warmup","workerPools","js","poolTimeout","Infinity","poolName","_loaders","pool","oneOfRules","rule","console","red","tip","log","yellow","validate","compiler","target","output","libraryTarget","externals","onEmit","emit","tapAsync","plugin","isJS","isCSS","VueSSRClientPlugin","compilation","cb","getStats","toJson","allFiles","uniq","initialFiles","entrypoints","asyncFiles","assetModules","fileToIndex","cid","identifier","size","PostcssConfig","configFile","loaderConfig","searchConfigFile","instance","e","configFromFile","cloneDeep","defaultConfig","merge","loadPlugins","createResolver","alias","StyleLoader","isServer","assetsDir","staticDir","postcssConfig","extResource","patterns","MiniCssExtractPlugin","customLoaders","styleResource","cssOptions","cssModulesOptions","importLoaders","styleLoader","extract","resourceQuery","WarnFixPlugin","done","tap","StatsPlugin","statsOptions","stdout","write","toString","WebpackBaseConfig","builder","isStatic","spinner","clone","presets","buildTarget","nuxtEnv","exec","getFileName","chunkFilename","perfLoader","oneOf","exclude","modulesToTranspile","getBabelOptions","poolOneOf","VueLoader","VueLoaderPlugin","TimeFixPlugin","WebpackBar","compiledIn","states","hasErrors","values","state","showReady","extendedConfig","webpackModulesDir","devtool","maxEntrypointSize","hints","resolveLoader","rules","extendConfig","isClient","WebpackClientConfig","priority","HTMLPlugin","chunksSortMode","DefinePlugin","HotModuleReplacementPlugin","statsDir","BundleAnalyzer","BundleAnalyzerPlugin","analyzerMode","defaultSizes","generateStatsFile","openAnalyzer","reportFilename","statsFilename","TerserWebpackPlugin","extractComments","terserOptions","comments","OptimizeCSSAssetsPlugin","entry","FriendlyErrorsWebpackPlugin","clearConsole","logLevel","VueSSRServerPlugin","entryName","entryInfo","entryAssets","bundle","maps","asset","match","WebpackServerConfig","node","maxAssetSize","nodeExternals","whitelist","BaseConfig","glob","pify","Glob","Builder","compilers","compilersWatching","custom","restart","relativeToBuild","_buildStatus","STATUS","INITIAL","unwatch","mfs","MFS","uniqBy","pluginBaseName","extname","BUILD_DONE","BUILDING","info","_nuxtPages","fsExtra","_defaultPage","additional","additionalStyle","success","remove","buildDirs","mkdirp","generateRoutesAndFiles","webpackBuild","normalizePlugins","templatesFiles","templateVars","appPath","components","layoutsFiles","f","extendedRoutes","customTemplateFiles","t","customPath","customFileExists","indicatorPath1","indicatorPath2","indicatorPath","fileContent","imports","serialize","outputFile","compilersOptions","clientConfig","ClientWebpackConfig","serverConfig","ServerWebpackConfig","pluginFiles","compilersOption","outputFileSystem","warmupAll","runner","webpackCompile","nextTick","webpackDev","run","watchOptions","close","heartbeat","watchClient","upath","normalizeSafe","refreshFiles","debounce","customPatterns","omit","nuxtRestartWatch","watcher","watching","unsafeKeys","writeFile","Generator","staticRoutes","srcBuiltPath","distNuxtPath","init","initiate","initRoutes","generateRoutes","afterGenerate","forGenerate","initDist","decorateWithPayloads","n","splice","payload","generateRoute","_formatErrors","isHandled","bgColor","line","Chalk","black","grey","stack","fallbackPath","copy","nojekyllPath","routeMap","pageErrors","_generate","minificationOptions","htmlMinifier","minifyErr","page","dirname","Utils","core"],"mappings":"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"}